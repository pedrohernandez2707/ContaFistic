import{I as T,s as E,y as L,T as _,V as x,b8 as w,b9 as k,A as q}from"./index.ebe4244e.js";var H=T({name:"QSlideTransition",props:{appear:Boolean,duration:{type:Number,default:300}},emits:["show","hide"],setup(t,{slots:n,emit:i}){let o=!1,a,c,l=null,u=null,s,f;function h(){a&&a(),a=null,o=!1,l!==null&&(clearTimeout(l),l=null),u!==null&&(clearTimeout(u),u=null),c!==void 0&&c.removeEventListener("transitionend",s),s=null}function m(e,r,d){r!==void 0&&(e.style.height=`${r}px`),e.style.transition=`height ${t.duration}ms cubic-bezier(.25, .8, .50, 1)`,o=!0,a=d}function y(e,r){e.style.overflowY=null,e.style.height=null,e.style.transition=null,h(),r!==f&&i(r)}function v(e,r){let d=0;c=e,o===!0?(h(),d=e.offsetHeight===e.scrollHeight?0:void 0):(f="hide",e.style.overflowY="hidden"),m(e,d,r),l=setTimeout(()=>{l=null,e.style.height=`${e.scrollHeight}px`,s=p=>{u=null,(Object(p)!==p||p.target===e)&&y(e,"show")},e.addEventListener("transitionend",s),u=setTimeout(s,t.duration*1.1)},100)}function b(e,r){let d;c=e,o===!0?h():(f="show",e.style.overflowY="hidden",d=e.scrollHeight),m(e,d,r),l=setTimeout(()=>{l=null,e.style.height=0,s=p=>{u=null,(Object(p)!==p||p.target===e)&&y(e,"hide")},e.addEventListener("transitionend",s),u=setTimeout(s,t.duration*1.1)},100)}return E(()=>{o===!0&&h()}),()=>L(_,{css:!1,appear:t.appear,onEnter:v,onLeave:b},n.default)}});function g(t){if(t===!1)return 0;if(t===!0||t===void 0)return 1;const n=parseInt(t,10);return isNaN(n)?0:n}var K=x({name:"close-popup",beforeMount(t,{value:n}){const i={depth:g(n),handler(o){i.depth!==0&&setTimeout(()=>{const a=w(t);a!==void 0&&k(a,o,i.depth)})},handlerKey(o){q(o,13)===!0&&i.handler(o)}};t.__qclosepopup=i,t.addEventListener("click",i.handler),t.addEventListener("keyup",i.handlerKey)},updated(t,{value:n,oldValue:i}){n!==i&&(t.__qclosepopup.depth=g(n))},beforeUnmount(t){const n=t.__qclosepopup;t.removeEventListener("click",n.handler),t.removeEventListener("keyup",n.handlerKey),delete t.__qclosepopup}});export{K as C,H as Q};
