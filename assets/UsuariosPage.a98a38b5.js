import{_ as y,d as C,g as d,aZ as h,o as Q,c as k,e as l,w as n,Q as v,i as b,aA as B,f as r,j as t,b8 as q,b7 as V,C as P,l as g}from"./index.762d07e4.js";import{Q as S}from"./QForm.97d69fac.js";import{Q as $,a as A}from"./QTable.af352f9e.js";import{u as E}from"./use-quasar.02954b31.js";import{a as p}from"./axios.3e09c041.js";import"./QList.144654f9.js";import"./QSelect.fdb0a187.js";import"./selection.a5915eb9.js";const I=C({setup(){const e=E(),a=d([{id:1,nombre:"Usuario 1",email:"usuario1@example.com",activo:!0},{id:2,nombre:"Usuario 2",email:"usuario2@example.com",activo:!1}]),o=d({codigo_usuario:null,usuario:"",tipo_usuario:"",estado_usuario:!0,nombres_usuario:"",contrasena:"",direccion_usuario:"",telefono_usuario:"",correo_usuario:""}),m=d(""),f=[{name:"nombre",label:"Nombre",field:"nombre",align:"left"},{name:"email",label:"Email",field:"email",align:"left"},{name:"activo",label:"Activo",field:"activo",align:"left",format:u=>u?"S\xED":"No"},{name:"acciones",label:"Acciones",field:"",align:"center",style:"width:100px"}],_=()=>{if(o.value.codigo_usuario){const u={p_id_usuario:parseInt(o.value.codigo_usuario),p_nombre_usuario:o.value.nombres_usuario,p_usuario:o.value.usuario,p_contrasena:o.value.contrasena,p_direccion:o.value.direccion_usuario===void 0?"":o.value.direccion_usuario,p_telefono:o.value.telefono_usuario===void 0?"":o.value.telefono_usuario,p_correo:o.value.correo_usuario===void 0?"":o.value.correo_usuario,p_estado:o.value.estado_usuario?"A":"I"};p.put("/users",u).then(i=>{e.notify({message:"Usuario actualizado correctamente",color:"primary",position:"center",icon:"info",actions:[{label:"Ok",color:"white",handler:()=>{}}]})})}else{const u={p_nombre_usuario:o.value.nombres_usuario,p_usuario:o.value.usuario,p_contrasena:o.value.contrasena,p_direccion:o.value.direccion_usuario,p_telefono:o.value.telefono_usuario,p_correo:o.value.correo_usuario,p_id_rol:parseInt(o.value.tipo_usuario.toString())};p.post("/users",u).then(i=>{e.notify({message:"Usuario creado correctamente",color:"primary",position:"center",icon:"info",actions:[{label:"Ok",color:"white",handler:()=>{}}]})})}c()},s=h(async()=>{o.value.codigo_usuario?await p.get("/users/"+o.value.codigo_usuario).then(u=>{let i=u.data;o.value.nombres_usuario=i.nombre_usuario,o.value.usuario=i.usuario,o.value.direccion_usuario=i.direccion,o.value.telefono_usuario=i.telefono_,o.value.correo_usuario=i.correo,o.value.estado_usuario=i.estado==="A"}):c()},1e3),c=()=>{o.value.codigo_usuario=null,o.value.nombres_usuario="",o.value.contrasena="",o.value.usuario="",o.value.direccion_usuario="",o.value.telefono_usuario="",o.value.correo_usuario=""},w=u=>{o.value={...u}},U=()=>{const u=m.value.toLowerCase();return a.value.filter(i=>i.nombre.toLowerCase().includes(u)||i.email.toLowerCase().includes(u)||(i.activo?"s\xED":"no").includes(u))};return{isPwd:d(!0),usuarios:a,form:o,columns:f,filtro:m,guardarUsuario:_,editarUsuario:w,debouncedBuscarUsuario:s,filtrarUsuarios:U}}}),N={class:"q-pa-sm"},D={class:"row"},F={class:"col-xs-12 col-sm-2"},L={class:"col-xs-12 col-sm-8"},T={class:"col col-xs-12 col-sm-2"},M={class:"row"},j={class:"col-xs-12 col-sm-4"},z={class:"col-xs-12 col-sm-4"},O={class:"row"},G={class:"col-xs-12 col-sm-8"},Z={class:"col-xs-12 col-sm-4"},H={class:"row"},J={class:"col-xs-12 col-sm-5 col-md-5"},K={class:"row justify-center q-ma-md"},R={class:"col-2"},W=r("div",{class:"text-h5"},"Usuarios",-1),X={style:{height:"400px","overflow-y":"auto"}};function Y(e,a,o,m,f,_){return Q(),k("div",N,[l(v,null,{default:n(()=>[l(b,null,{default:n(()=>[l(S,{onSubmit:B(e.guardarUsuario,["prevent"])},{default:n(()=>[r("div",D,[r("div",F,[l(t,{modelValue:e.form.codigo_usuario,"onUpdate:modelValue":[a[0]||(a[0]=s=>e.form.codigo_usuario=s),e.debouncedBuscarUsuario],label:"C\xF3digo Usuario",outlined:"",dense:"",disable:""},null,8,["modelValue","onUpdate:modelValue"])]),r("div",L,[l(t,{modelValue:e.form.nombres_usuario,"onUpdate:modelValue":a[1]||(a[1]=s=>e.form.nombres_usuario=s),label:"Nombre del usuario",outlined:"",dense:""},null,8,["modelValue"])]),r("div",T,[l(q,{label:"Estado",modelValue:e.form.estado_usuario,"onUpdate:modelValue":a[2]||(a[2]=s=>e.form.estado_usuario=s),color:"green",class:"q-ma-sm",dense:"",disable:!e.form.codigo_usuario,"left-label":""},null,8,["modelValue","disable"])])]),l(V,{spaced:"",inset:""}),r("div",M,[r("div",j,[l(t,{modelValue:e.form.usuario,"onUpdate:modelValue":a[3]||(a[3]=s=>e.form.usuario=s),label:"Usuario para el sistema",outlined:"",dense:""},null,8,["modelValue"])]),r("div",z,[l(t,{modelValue:e.form.contrasena,"onUpdate:modelValue":a[5]||(a[5]=s=>e.form.contrasena=s),label:"Contrase\xF1a para el sistema",outlined:"",dense:"",type:e.isPwd?"password":"text"},{append:n(()=>[l(P,{name:e.isPwd?"visibility_off":"visibility",class:"cursor-pointer",onClick:a[4]||(a[4]=s=>e.isPwd=!e.isPwd)},null,8,["name"])]),_:1},8,["modelValue","type"])])]),l(V,{spaced:""}),r("div",O,[r("div",G,[l(t,{modelValue:e.form.direccion_usuario,"onUpdate:modelValue":a[6]||(a[6]=s=>e.form.direccion_usuario=s),label:"Direcci\xF3n",outlined:"",dense:""},null,8,["modelValue"])]),r("div",Z,[l(t,{modelValue:e.form.telefono_usuario,"onUpdate:modelValue":a[7]||(a[7]=s=>e.form.telefono_usuario=s),label:"Telefono",outlined:"",dense:""},null,8,["modelValue"])])]),r("div",H,[r("div",J,[l(t,{modelValue:e.form.correo_usuario,"onUpdate:modelValue":a[8]||(a[8]=s=>e.form.correo_usuario=s),label:"Correo",outlined:"",dense:""},null,8,["modelValue"])])]),r("div",K,[r("div",R,[l(g,{type:"submit",label:e.form.codigo_usuario?"Guardar Usuario":"Crear Usuario",color:"primary",size:"md",outline:"",rounded:""},null,8,["label"])])])]),_:1},8,["onSubmit"])]),_:1})]),_:1}),l(v,{class:"q-my-md"},{default:n(()=>[l(b,null,{default:n(()=>[W,l(t,{modelValue:e.filtro,"onUpdate:modelValue":a[9]||(a[9]=s=>e.filtro=s),label:"Buscar usuarios",outlined:"",dense:"",class:"q-my-md"},null,8,["modelValue"]),r("div",X,[l($,{style:{height:"400px"},flat:"","virtual-scroll":"",separator:"cell",bordered:"","rows-per-page-options":[0],class:"my-sticky-header-table",rows:e.filtrarUsuarios(),columns:e.columns,"row-key":"id"},{"body-cell-acciones":n(s=>[l(A,{props:s},{default:n(()=>[l(g,{icon:"edit",color:"primary",dense:"",onClick:c=>e.editarUsuario(s.row)},null,8,["onClick"])]),_:2},1032,["props"])]),_:1},8,["rows","columns"])])]),_:1})]),_:1})])}var io=y(I,[["render",Y]]);export{io as default};
