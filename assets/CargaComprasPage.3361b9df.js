import{d as ge,g as c,_ as he,P as I,o as _e,ax as Ce,w as i,e as a,l as N,i as ee,j as E,C as ae,ay as re,az as A,Q as oe,aE as Ue,bn as Fe,bo as we,f as u,q as ne,r as $e,a as z,bh as de,b8 as ze,x as J,aF as ue}from"./index.de91045c.js";import{h as O}from"./QSelect.2ed87d02.js";import{r as Je,u as Oe,Q as ce,a as pe,b as me,c as qe}from"./xlsx.28f2cdde.js";import{Q as Ve,a as g}from"./QTable.ff5ff233.js";import{Q as Ye,a as Le,b as Z}from"./QBar.9701de92.js";import{Q as Ge}from"./QPage.c00b98e2.js";import{C as be}from"./ClosePopup.995d2948.js";import{s as v,a as U,b as He,c as fe}from"./axios.23fd2c5d.js";import"./selection.4860df2b.js";import"./use-render-cache.3aae9b27.js";import"./QList.35154e5b.js";const Re=ge({name:"BuscadorCompras",emits:["compra-seleccionada"],setup(e,{emit:n}){const V=c(null),F=c(!1),T=c(""),M=[{name:"empresa",label:"Empresa",align:"left",field:"nombre_empresa",sortable:!0},{name:"compra",label:"Compra",align:"left",field:"id_compra",sortable:!0},{name:"poliza",label:"Poliza",align:"left",field:"id_poliza",sortable:!0},{name:"descripcion",label:"Descripci\xF3n",align:"left",field:"descripcion",sortable:!0}],p=c([]),l=c([...p.value]),f=()=>{T.value===null?l.value=p.value:l.value=p.value.filter(_=>_.id_compra.toLowerCase().includes(T.value)||_.descripcion||_.nombre_empresa||_.id_poliza.toLowerCase().includes(T.value.toLowerCase()))},q=(_,D)=>{F.value=!1,n("compra-seleccionada",D.id_compra)},x=()=>{F.value=!1},Y=async()=>{var _;F.value=!0,await new Promise(D=>setTimeout(D,250)),(_=V.value)==null||_.focus(),L()},L=()=>{let _=JSON.parse(I.getItem("empresa").toString());if(!_.id){v("Debe Seleccionar la Empresa",{tipo:"negative"});return}let D=I.getItem("periodo");if(!D){v("Debe Seleccionar el Periodo para la Empresa Correspondiente",{tipo:"negative"});return}U.get("compras",{params:{id_empresa:_.id,id_periodo:D}}).then(k=>{p.value=k.data,l.value=k.data})};return{refInputBuscar:V,dialogVisible:F,searchQuery:T,columns:M,compras:p,filteredCompras:l,filtrarCompras:f,seleccionarCompra:q,cerrarDialogo:x,abrirDialogo:Y}}}),We=e=>(Fe("data-v-1e58e010"),e=e(),we(),e),Ke=We(()=>u("div",{class:"text-h6"},"Buscador",-1));function Xe(e,n,V,F,T,M){return _e(),Ce(Ue,{modelValue:e.dialogVisible,"onUpdate:modelValue":n[1]||(n[1]=p=>e.dialogVisible=p),persistent:""},{default:i(()=>[a(oe,{style:{"min-width":"650px"}},{default:i(()=>[a(Ye,null,{default:i(()=>[Ke,a(Le),a(N,{dense:"",flat:"",icon:"close",onClick:e.cerrarDialogo},null,8,["onClick"])]),_:1}),a(ee,null,{default:i(()=>[a(E,{modelValue:e.searchQuery,"onUpdate:modelValue":[n[0]||(n[0]=p=>e.searchQuery=p),e.filtrarCompras],ref:"refInputBuscar",label:"Buscar Libro Compras",dense:"",outlined:"",clearable:"",debounce:"350"},{append:i(()=>[a(ae,{name:"search"})]),_:1},8,["modelValue","onUpdate:modelValue"])]),_:1}),a(Ve,{rows:e.filteredCompras,columns:e.columns,"row-key":"correlativo",style:{height:"400px"},flat:"",bordered:"","virtual-scroll":"",separator:"cell","rows-per-page-options":[0],class:"my-sticky-header-table",onRowDblclick:e.seleccionarCompra,dense:""},{"body-cell-correlativo":i(p=>[a(g,{props:p},{default:i(()=>[re(A(p.row.correlativo),1)]),_:2},1032,["props"])]),"body-cell-nombre":i(p=>[a(g,{props:p},{default:i(()=>[re(A(p.row.nombre),1)]),_:2},1032,["props"])]),_:1},8,["rows","columns","onRowDblclick"])]),_:1})]),_:1},8,["modelValue"])}var Ze=he(Re,[["render",Xe],["__scopeId","data-v-1e58e010"]]);const le=new Date;le.setHours(0,-le.getTimezoneOffset(),0,0);let ve=le.toJSON().slice(0,10).replaceAll("-","/");const ea=ge({components:{BuscadorCompras:Ze},setup(){const e=c(null),n=()=>{var r;(r=e.value)==null||r.abrirDialogo()},V=c([]),F=c([]),T=c(null),M=c(""),p=c(!1),l=c(""),f=c(null),q=c(null),x=c(0),Y=()=>{const r=I.getItem("empresa");if(r){const s=JSON.parse(r.toString());x.value=s.id}else{alert("Debe seleccionar una empresa");return}f.value=null,U.get("/cuentasn4/combo",{params:{id_empresa:x.value}}).then(s=>{V.value=s.data})},L=(r,s)=>{if(r===""){s(()=>{F.value=[...V.value]});return}const m=r.toLowerCase();s(()=>{F.value=V.value.filter(b=>b.descripcion.toLowerCase().includes(m))})},_=(r,s)=>{if(r===""){s(()=>{F.value=V.value});return}s(()=>{const m=r.toLowerCase();F.value=V.value.filter(b=>isNaN(m)?b.descripcion.toLowerCase().includes(m.toLowerCase()):b.descripcion.toLowerCase().startsWith(m.toString()))},m=>{r!==""&&m.options.length>0&&(m.setOptionIndex(-1),m.moveOptionSelection(1,!0))})},D=c(null),k=c(null),G=c(!1),Se=c([{id:1,nombre:"2024"}]),ye=c([{id:1,nombre:"Enero"},{id:2,nombre:"Febrero"},{id:3,nombre:"Marzo"},{id:4,nombre:"Abril"},{id:5,nombre:"Mayo"},{id:6,nombre:"Junio"},{id:7,nombre:"Julio"},{id:8,nombre:"Agosto"},{id:9,nombre:"Septiembre"},{id:10,nombre:"Octubre"},{id:11,nombre:"Noviembre"},{id:12,nombre:"Diciembre"}]),S=c(null),Te=c([]),Ne=c(!1),H=c(ve),R=c(ve),C=c([{}]),Ie=[{name:"Doc",label:"Doc. No",field:"documento",align:"left"},{name:"Serie",label:"Serie",field:"serie",align:"left"},{name:"Fecha",label:"Fecha",field:"fecha",align:"left",sortable:!0,style:"min-width:120px;width:120px"},{name:"Tipo",label:"Tipo",field:"tipo",align:"left",style:"min-width:120px;max-width:120px;width:120px;"},{name:"Proveedor",label:"Proveedor",field:"proveedor",align:"left",style:"width: auto;min-width:125px;"},{name:"NIT",label:"NIT",field:"nit",align:"left",style:"min-width:100px;width:100px"},{name:"Cta",label:"Cta",field:"Cta",align:"left",style:"max-width:150px;width:150px"},{name:"check",label:"Factura Pagada",field:"checked",align:"center",style:"width: 60px;max-width:60px;"},{name:"Compras",label:"Compras",field:"compras",align:"left"},{name:"Servicios",label:"Servicios",field:"servicios",align:"left"},{name:"Exentos",label:"Exentos",field:"exentos",align:"left"},{name:"SubTotal",label:"SubTotal",field:"subtotal",align:"left"},{name:"Iva",label:"IVA",field:"iva",align:"left"},{name:"Total",label:"Total",field:"total",align:"left"},{name:"acciones",label:"",field:"",align:"right",style:"width: 40px; padding:5px"},{name:"Petroleo",label:"Petr\xF3leo",field:"petroleo",align:"left"},{name:"TurismoHospedaje",label:"Turismo Hospedaje",field:"turismo_hospedaje",align:"left"},{name:"TurismoPasajes",label:"Turismo Pasajes",field:"turismo_pasajes",align:"left"},{name:"TimbrePrensa",label:"Timbre de Prensa",field:"timbre_prensa",align:"left"},{name:"Bomberos",label:"Bomberos",field:"bomberos",align:"left"},{name:"TasaMunicipal",label:"Tasa Municipal",field:"tasa_municipal",align:"left"},{name:"BebidasAlcoholicas",label:"Bebidas Alcoh\xF3licas",field:"bebidas_alcoholicas",align:"left"},{name:"Tabaco",label:"Tabaco",field:"tabaco",align:"left"},{name:"Cemento",label:"Cemento",field:"cemento",align:"left"},{name:"BebidasNoAlcoholicas",label:"Bebidas No Alcoh\xF3licas",field:"bebidas_no_alcoholicas",align:"left"},{name:"TarifaPortuaria",label:"Tarifa Portuaria",field:"tarifa_portuaria",align:"left"}],De=r=>r.every(s=>s.Cta!==null),ke=async()=>{let r=!1;const s=JSON.parse(I.getItem("empresa").toString()),m=I.getItem("user");let b=0;if(s)b=s.id;else{v("Debe Seleccionar Empresa",{tipo:"negative"}),r=!0;return}const t=k.value;if(!t){v("Debe Seleccionar el Mes",{tipo:"negative"}),r=!0;return}const w=T.value;if(!w){v("Debe Seleccionar la Cuenta Contable Para el Encabezado",{tipo:"negative"}),r=!0;return}if(C.value.length==0){v("Debe Ingresar al Menos un Detalle",{tipo:"negative"}),r=!0;return}if(!De(C.value)){v("Debe Indicar la cuenta contable para cada uno de los Detalles, verificar",{tipo:"negative"}),r=!0;return}let y=I.getItem("periodo");if(!y){v("Debe Seleccionar el Periodo para la Empresa Correspondiente",{tipo:"negative"}),r=!0;return}if(!r){let P=f.value;if(!await He("Confirmaci\xF3n","Esta seguro de "+(P!==null?"Actualizar la Compra: "+P:"Ingresar la Compra?"),{}))return;const Q=C.value.map(o=>({Cta:o.Cta,documento:o.documento,serie:o.serie,fecha:o.fecha,tipo:o.tipo,proveedor:o.proveedor,nit:o.nit,compras:o.compras,servicios:o.servicios,exentos:o.exentos,valor:o.valor,iva:o.iva,total:(isNaN(parseFloat(o.servicios))?0:parseFloat(o.servicios))+(isNaN(parseFloat(o.compras))?0:parseFloat(o.compras))-(isNaN(parseFloat(o.iva))?0:parseFloat(o.iva))-(parseFloat(o.petroleo)+parseFloat(o.turismo_hospedaje)+parseFloat(o.turismo_pasajes)+parseFloat(o.timbre_prensa)+parseFloat(o.bomberos)+parseFloat(o.tasa_municipal)+parseFloat(o.bebidas_alcoholicas)+parseFloat(o.tabaco)+parseFloat(o.cemento)+parseFloat(o.bebidas_no_alcoholicas)+parseFloat(o.tarifa_portuaria)),factura_pagada:o.checked,total_idp:parseFloat(o.petroleo)+parseFloat(o.turismo_hospedaje)+parseFloat(o.turismo_pasajes)+parseFloat(o.timbre_prensa)+parseFloat(o.bomberos)+parseFloat(o.tasa_municipal)+parseFloat(o.bebidas_alcoholicas)+parseFloat(o.tabaco)+parseFloat(o.cemento)+parseFloat(o.bebidas_no_alcoholicas)+parseFloat(o.tarifa_portuaria),petroleo:parseFloat(o.petroleo),turismo_hospedaje:parseFloat(o.turismo_hospedaje),turismo_pasajes:parseFloat(o.turismo_pasajes),timbre_prensa:parseFloat(o.timbre_prensa),bomberos:parseFloat(o.bomberos),tasa_municipal:parseFloat(o.tasa_municipal),bebidas_alcoholicas:parseFloat(o.bebidas_alcoholicas),tabaco:parseFloat(o.tabaco),cemento:parseFloat(o.cemento),bebidas_no_alcoholicas:parseFloat(o.bebidas_no_alcoholicas),tarifa_portuaria:parseFloat(o.tarifa_portuaria)}));if(console.log("\u{1F680} ~ comprasdet ~ comprasdet:",Q),f.value!=null){const o={_encabezado:[{_id_compra:f.value,_id_cuenta_contable:w&&w.id?w.id:w,_usuario_ingresa:m,_estado:"A",_p_id_poliza:l.value,_mes:k.value}],_detalle:Q};z.show(),await U.put("/compras",o).then(B=>{console.log(B.data),B.data.fn_insertar_compras_json,v("Compra actualizada correctamente, Partida Actualizada",{}),G.value=!0}).finally(()=>{z.hide()})}else{const o={_encabezado:[{_id_Empresa:b,_mes:(t==null?void 0:t.id)||0,_periodo:y,_id_poliza:0,_id_cuenta_contable:w.id,_usuario_ingresa:m,_estado:"A"}],_detalle:Q};z.show(),await U.post("/compras",o).then(B=>{const K=B.data.fn_insertar_compras_json,[d,j]=K.replace(/[()]/g,"").split(","),X=parseInt(d);j.replace(/"/g,""),v(`Compra guardada correctamente No.${d} Partida Generada ${j}`,{}),f.value=X.toString(),l.value=j.toString(),p.value=!0,G.value=!0}).finally(()=>{z.hide()})}}},Pe=async()=>{var r,s;if(S.value){const m=(s=(r=k.value)==null?void 0:r.id)!=null?s:null;let b=JSON.parse(I.getItem("empresa").toString());if(!b){v("Debe Seleccionar la Empresa",{tipo:"negative"}),S.value=null;return}if(!m){v("Debe Seleccionar el Mes",{tipo:"negative"}),S.value=null;return}let t=I.getItem("periodo");if(!t){v("Debe Seleccionar el Periodo para la Empresa Correspondiente",{tipo:"negative"}),S.value=null;return}const w=await S.value.arrayBuffer();let y=!1;const P=Je(w),ie=P.Sheets[P.SheetNames[0]],Q=Oe.sheet_to_json(ie);let o=b?b.nit:"";const B=Q.filter(d=>{const j=se(d["Fecha de emisi\xF3n"]).toString(),X=parseInt(j.split("-")[1]),Qe=parseInt(j.split("-")[0]);return d["Nombre completo del receptor"].toString().trim(),b.nombre_empresa.toString().trim(),d.Estado.toString().trim()!=="Vigente"?(v("Existen documentos No Vigentes, valide el Archivo.",{tipo:"negative",timeout:9500,progress:!0}),y=!0,S.value=null,!1):o!==d["ID del receptor"].toString().trim()?(v("Existen documentos con un Nit Receptor distinto a la empresa seleccionada, favor validar el archivo",{tipo:"negative",timeout:9500,progress:!0}),S.value=null,y=!0,!1):o===d["NIT del emisor"]?(v("Existen documentos con el mismo NIT de la empresa seleccionada, verifique si no est\xE1 intentando cargar un archivo de ventas!",{tipo:"negative",timeout:8500,progress:!0}),S.value=null,y=!0,!1):X!==m?(v("Existen documentos con una fecha que no corresponde al mes seleccionado. Verifique el archivo.",{tipo:"negative",timeout:8500,progress:!0}),y=!0,S.value=null,!1):Qe!==t?(v("Existen documentos con una fecha que no corresponde al periodo seleccionado. Verifique el archivo.",{tipo:"negative",timeout:8500,progress:!0}),y=!0,S.value=null,!1):!0});if(y)return;const K=B.map(d=>({documento:d["N\xFAmero del DTE"],serie:d.Serie,fecha:se(d["Fecha de emisi\xF3n"]),tipo:d["Tipo de DTE (nombre)"],proveedor:d["Nombre completo del emisor"],nit:d["NIT del emisor"],compras:d["Monto (Gran Total)"],subtotal:(d["Monto (Gran Total)"]-d["IVA (monto de este impuesto)"]).toFixed(2),iva:d["IVA (monto de este impuesto)"],Cta:null,checked:!0,petroleo:d["Petr\xF3leo (monto de este impuesto)"],turismo_hospedaje:d["Turismo Hospedaje (monto de este impuesto)"],turismo_pasajes:d["Turismo Pasajes (monto de este impuesto)"],timbre_prensa:d["Timbre de Prensa (monto de este impuesto)"],bomberos:d["Bomberos (monto de este impuesto)"],tasa_municipal:d["Tasa Municipal (monto de este impuesto)"],bebidas_alcoholicas:d["Bebidas alcoh\xF3licas (monto de este impuesto)"],tabaco:d["Tabaco (monto de este impuesto)"],cemento:d["Cemento (monto de este impuesto)"],bebidas_no_alcoholicas:d["Bebidas no Alcoh\xF3licas (monto de este impuesto)"],tarifa_portuaria:d["Tarifa Portuaria (monto de este impuesto)"]}));C.value=K}return 0},W=c("eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJBZ2VuY2lhVmlydHVhbERURSIsImlzcyI6IlNBVCIsIm5pdCI6IjEwNDkwOTUwMSIsImV4cCI6MTcyNTY0MTk1MywiaWF0IjoxNzI1NTk4NzUzfQ.2KE72Se31MWfXb3hVNJhluyAh2Fn6Vw-puz7UwbPoTk"),Ee=()=>{const r=fe.create();W.value===""&&(console.log("Hacer login sat"),r.get("http://localhost:5000/get-token").then(s=>{console.log(s.data),W.value=s.data}).catch(s=>console.error("Error:",s)))};function se(r){const s=new Date(r),m=s.getFullYear(),b=String(s.getMonth()+1).padStart(2,"0"),t=String(s.getDate()).padStart(2,"0"),w=String(s.getHours()).padStart(2,"0"),y=String(s.getMinutes()).padStart(2,"0"),P=String(s.getSeconds()).padStart(2,"0");return`${m}-${b}-${t} ${w}:${y}:${P}`}const $=r=>{const[s,m,b]=r.split("/").map(Number),t=b.toString().padStart(2,"0"),w=m.toString().padStart(2,"0");return`${t}-${w}-${s}`},Ae=()=>{const r=fe.create();console.log($(H.value),$(R.value)),r.get("http://localhost:5000/get-fact",{headers:{Authorization:W.value},params:{nit:"104909501",fechai:$(H.value),fechaf:$(R.value),tipo:"R"}}).then(s=>{const b=s.data.data.map(t=>({documento:t.numeroDocumento,serie:t.serie,fecha:t.fechaEmision,tipo:t.tipo,proveedor:t.nombreEmisor,nit:t.nitEmisor,total:t.granTotal,iva:t.totalIva}));C.value=b}).catch(s=>console.error("Error:",s))},Be=r=>{C.value=C.value.filter(s=>s.documento!==r)},je=()=>{C.value.push({documento:C.value.length+1})},Me=ne(()=>C.value.reduce((r,s)=>r+parseFloat(s.total||0),0).toFixed(2)),xe=ne(()=>C.value.reduce((r,s)=>r+parseFloat(s.iva||0),0).toFixed(2));function h(r){if(r==null)return 0;const s=r.replace(/[\$,]/g,"");return parseFloat(s)}return{cuentasFilter:F,onBuscarCompra:r=>{U.get("compras/idCompra",{params:{id_compra:r}}).then(s=>{console.log(s.data),f.value=r,k.value=s.data.enc.mes,q.value=s.data.enc.id_periodo,T.value=s.data.enc.id_cuenta_contable,l.value=s.data.enc.id_poliza,p.value=!0;let b=s.data.det.map(t=>({id:1,Cta:{id:t.id_cuenta,nombre:t.nombre,correlativo:t.correlativo,descripcion:t.correlativo+" "+t.nombre},documento:t.doc_no,serie:t.serie,fecha:t.fecha,tipo:t.tipo_documento,proveedor:t.proveedor,nit:t.nit_cedula,checked:t.factura_pagada,importacion:t.importaciones,compras:h(t.compras),servicios:h(t.servicios),exentos:t.exentos,valor:t.valor,total:h(t.total),iva:h(t.iva),petroleo:h(t.petroleo),turismo_hospedaje:h(t.turismo_hospedaje),turismo_pasajes:h(t.turismo_pasajes),timbre_prensa:h(t.timbre_prensa),bomberos:h(t.bomberos),tasa_municipal:h(t.tasa_municipal),bebidas_alcoholicas:h(t.bebidas_alcoholicas),tabaco:h(t.tabaco),cemento:h(t.cemento),bebidas_no_alcoholicas:h(t.bebidas_no_alcoholicas),tarifa_portuaria:h(t.tarifa_portuaria)}));C.value=b})},file:S,parsedCSV:Te,visibleDate:Ne,fechai:H,fechaf:R,convert:Pe,columns:Ie,compras:C,getdata:Ee,getFacturas:Ae,eliminarFila:Be,agregarFila:je,calculoTotal:Me,calculoIva:xe,onClick:ke,selectedCuentaEnc:T,cuentasn4:V,filterCuenta:_,getCuentasN4:Y,cantFacturas:M,txtNoPartida:l,checkPartidaGenerada:p,txtNoCompra:f,mesesDelA\u00F1o:ye,periodoModel:D,mesesModel:k,periodos:Se,disableBTN:G,showBuscarCompra:n,refBuscadorCompra:e,filterCuentas:L,idEmpresa:x}},mounted(){const e=I.getItem("empresa");if(!e)alert("Debe seleccionar una empresa antes de acceder a esta p\xE1gina."),this.$router.push("/");else{const n=JSON.parse(e.toString());this.idEmpresa=n.id,this.getCuentasN4(),this.getdata()}}}),te=e=>(Fe("data-v-9ac9d5b2"),e=e(),we(),e),aa={class:"row q-col-gutter-sm"},oa={class:"col-4"},la={class:"col-4"},ta={class:"col-1"},sa={class:"col-4"},ia={class:"col-2"},ra={class:"col-2 text-center"},na={class:"col-3"},da={class:"col-12"},ua={class:"col-12"},ca={class:"row q-col-gutter-sm"},pa={class:"col-5"},ma={class:"row items-center justify-end"},ba={class:"col-5"},fa={class:"row items-center justify-end"},va={class:"col-2"},ga={class:"col-12"},ha={class:"row q-ma-sm"},_a=te(()=>u("div",{class:"col-9"},[u("div",{class:"text-h6"},"Detalle de Compras")],-1)),Ca=te(()=>u("div",{class:"col-1"},null,-1)),Fa={class:"col"},wa=te(()=>u("strong",null,"Totales:",-1));function Va(e,n,V,F,T,M){const p=$e("buscador-compras");return _e(),Ce(Ge,{padding:""},{default:i(()=>[a(oe,{class:"q-mt-md"},{default:i(()=>[a(ee,null,{default:i(()=>[u("div",aa,[u("div",oa,[a(E,{modelValue:e.txtNoCompra,"onUpdate:modelValue":n[0]||(n[0]=l=>e.txtNoCompra=l),type:"text",label:"No. Interno",outlined:"",dense:"",disable:!0},null,8,["modelValue"])]),u("div",la,[a(O,{modelValue:e.mesesModel,"onUpdate:modelValue":n[1]||(n[1]=l=>e.mesesModel=l),options:e.mesesDelA\u00F1o,label:"Mes",outlined:"",dense:"","option-value":"id","option-label":"nombre",disable:e.txtNoCompra!=null},null,8,["modelValue","options","disable"])]),u("div",ta,[a(N,{color:"primary",outline:"",icon:"search",onClick:e.showBuscarCompra},null,8,["onClick"])]),u("div",sa,[a(O,{modelValue:e.selectedCuentaEnc,"onUpdate:modelValue":n[2]||(n[2]=l=>e.selectedCuentaEnc=l),options:e.cuentasFilter,label:"Cuenta Haber",outlined:"",dense:"","option-value":"id","option-label":"descripcion","use-input":"","input-debounce":"0",onFilter:e.filterCuentas,clearable:""},null,8,["modelValue","options","onFilter"])]),u("div",ia,[a(E,{modelValue:e.cantFacturas,"onUpdate:modelValue":n[3]||(n[3]=l=>e.cantFacturas=l),type:"text",label:"Cant. Facturas",outlined:"",dense:"",disable:!0},null,8,["modelValue"])]),u("div",ra,[a(de,{"left-label":"",modelValue:e.checkPartidaGenerada,"onUpdate:modelValue":n[4]||(n[4]=l=>e.checkPartidaGenerada=l),label:"Partida generada",disable:!0},null,8,["modelValue"])]),u("div",na,[a(E,{modelValue:e.txtNoPartida,"onUpdate:modelValue":n[5]||(n[5]=l=>e.txtNoPartida=l),type:"text",label:"No.Partida",outlined:"",dense:"",disable:!0},null,8,["modelValue"])]),u("div",da,[a(ze,{modelValue:e.visibleDate,"onUpdate:modelValue":n[6]||(n[6]=l=>e.visibleDate=l),label:"Consultar SAT"},null,8,["modelValue"])]),u("div",ua,[a(ce,null,{default:i(()=>[J(u("div",ca,[u("div",pa,[a(E,{dense:"",outlined:"",modelValue:e.fechai,"onUpdate:modelValue":n[8]||(n[8]=l=>e.fechai=l),mask:"date",rules:["date"],label:"Fecha Inicial","hide-bottom-space":"",placeholder:"YYYY/MM/DD",clearable:""},{append:i(()=>[a(ae,{name:"event",class:"cursor-pointer"},{default:i(()=>[a(pe,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:i(()=>[a(me,{modelValue:e.fechai,"onUpdate:modelValue":n[7]||(n[7]=l=>e.fechai=l)},{default:i(()=>[u("div",ma,[J(a(N,{label:"Cerrar",color:"primary",flat:""},null,512),[[be]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),u("div",ba,[a(E,{dense:"",outlined:"",modelValue:e.fechaf,"onUpdate:modelValue":n[10]||(n[10]=l=>e.fechaf=l),mask:"date",rules:["date"],"hide-bottom-space":"",label:"Fecha Final",placeholder:"YYYY/MM/DD",clearable:""},{append:i(()=>[a(ae,{name:"event",class:"cursor-pointer"},{default:i(()=>[a(pe,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:i(()=>[a(me,{modelValue:e.fechaf,"onUpdate:modelValue":n[9]||(n[9]=l=>e.fechaf=l)},{default:i(()=>[u("div",fa,[J(a(N,{label:"Cerrar",color:"primary",flat:""},null,512),[[be]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),u("div",va,[a(N,{color:"primary",label:"Consultar",onClick:e.getFacturas},null,8,["onClick"])])],512),[[ue,e.visibleDate]])]),_:1})]),u("div",ga,[a(ce,null,{default:i(()=>[J(a(qe,{modelValue:e.file,"onUpdate:modelValue":[n[11]||(n[11]=l=>e.file=l),e.convert],label:"Seleccione o arraste un archivo para importar(.xls)",outlined:"",accept:".xls",clearable:""},null,8,["modelValue","onUpdate:modelValue"]),[[ue,!e.visibleDate]])]),_:1})])])]),_:1})]),_:1}),a(oe,{class:"q-mt-sm"},{default:i(()=>[a(ee,{class:"q-pt-none"},{default:i(()=>[u("div",ha,[_a,Ca,u("div",Fa,[a(N,{color:"primary",icon:"check",label:e.txtNoCompra?"Actualizar Partida":"Generar Partida",onClick:e.onClick,disable:e.disableBTN},null,8,["label","onClick","disable"])])]),a(Ve,{style:{height:"500px"},flat:"",bordered:"","virtual-scroll":"",separator:"cell","rows-per-page-options":[0],class:"my-sticky-header-table",rows:e.compras,columns:e.columns,"row-key":"id",dense:""},{"body-cell-Tipo":i(l=>[a(g,{props:l},{default:i(()=>[a(O,{modelValue:l.row.tipo,"onUpdate:modelValue":f=>l.row.tipo=f,options:[{label:"Factura",value:"FACT"},{label:"Cambiaria",value:"FCAM"},{label:"NC",value:"NCRE"}],borderless:"",dense:"","options-dense":"","map-options":"",class:"full-width"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["props"])]),"body-cell":i(l=>[a(g,{props:l},{default:i(()=>[a(E,{modelValue:l.row[l.col.field],"onUpdate:modelValue":f=>l.row[l.col.field]=f,"input-class":"text-right",dense:"",borderless:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["props"])]),"body-cell-Cta":i(l=>[a(g,{props:l},{default:i(()=>[a(O,{modelValue:l.row.Cta,"onUpdate:modelValue":f=>l.row.Cta=f,options:e.cuentasFilter,"option-label":"descripcion","option-value":"id",dense:"",borderless:"","map-options":"","hide-selected":"","hide-bottom-space":"","use-input":"","fill-input":"",clearable:"",onFilter:e.filterCuenta,onFilterAbort:()=>{}},null,8,["modelValue","onUpdate:modelValue","options","onFilter"])]),_:2},1032,["props"])]),"body-cell-check":i(l=>[a(g,{props:l,align:"center"},{default:i(()=>[a(de,{modelValue:l.row.checked,"onUpdate:modelValue":f=>l.row.checked=f,color:"primary",dense:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["props"])]),"body-cell-acciones":i(l=>[a(g,{props:l},{default:i(()=>[a(N,{flat:"",round:"",icon:"delete",color:"negative",onClick:f=>e.eliminarFila(l.row.documento)},null,8,["onClick"])]),_:2},1032,["props"])]),"bottom-row":i(()=>[a(Z,null,{default:i(()=>[a(g,{colspan:"7",class:"text-right"}),a(g,{class:"text-right"},{default:i(()=>[wa]),_:1}),a(g,{class:"text-right"},{default:i(()=>[u("strong",null,A(e.calculoTotal),1)]),_:1}),a(g,{class:"text-right"},{default:i(()=>[u("strong",null,A(e.calculoTotal),1)]),_:1}),a(g,{class:"text-right"},{default:i(()=>[u("strong",null,A(e.calculoTotal),1)]),_:1}),a(g,{class:"text-right"},{default:i(()=>[u("strong",null,A(e.calculoTotal),1)]),_:1}),a(g,{class:"text-right"},{default:i(()=>[u("strong",null,A(e.calculoIva),1)]),_:1})]),_:1})]),bottom:i(l=>[a(Z,{props:l},{default:i(()=>[a(g,{colspan:"100%"},{default:i(()=>[a(N,{flat:"",icon:"add",label:"Agregar Fila",onClick:e.agregarFila},null,8,["onClick"])]),_:1})]),_:2},1032,["props"])]),"no-data":i(l=>[a(Z,{props:l},{default:i(()=>[a(g,{colspan:"100%"},{default:i(()=>[a(N,{flat:"",icon:"add",label:"Agregar Fila",onClick:e.agregarFila},null,8,["onClick"])]),_:1})]),_:2},1032,["props"])]),_:1},8,["rows","columns"])]),_:1})]),_:1}),a(p,{ref:"refBuscadorCompra",onCompraSeleccionada:e.onBuscarCompra},null,8,["onCompraSeleccionada"])]),_:1})}var Ma=he(ea,[["render",Va],["__scopeId","data-v-9ac9d5b2"]]);export{Ma as default};
