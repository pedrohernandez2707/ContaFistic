import{Q as B,a as c}from"./QBreadcrumbs.0a672f0a.js";import{_ as U,d as k,g as r,o as F,c as q,e as a,w as n,Q as w,a as m,i as C,aI as D,f as s,j as b,aH as G,ba as f,l as g}from"./index.cfa62c89.js";import{h as _}from"./QSelect.094e4cd6.js";import{Q as L}from"./QForm.984041a7.js";import{Q as T,a as $}from"./QTable.a99d1b42.js";import{Q as A}from"./QSpinnerBall.ef96c00c.js";import{a as u,s as Q}from"./axios.55b105d8.js";import"./selection.fe56f4bf.js";import"./QList.0f7219f7.js";const H=k({setup(){const e=r([]),t=r([]),v=r([{id:1,tipo_empresa:"Contibuyente Normal"},{id:2,tipo_empresa:"Peque\xF1o Contribuyente"}]),y=r([{id:1,tipo:"Bienes"},{id:2,tipo:"Servicios"}]),i=r({id:null,nombre:"",contribuyente:"",tipoempresa:"",flag_gasolinera:!1,flag_hotel:!1,activo:!0,distribucionVentas:"",codigo_establecimiento:null}),p=r(""),l=[{name:"nombre",label:"Nombre",field:"nombre_empresa",align:"left"},{name:"contribuyente",label:"Contribuyente",field:"nombre_contribuyente",align:"left"},{name:"tipoempresa",label:"Tipo de Empresa",field:"idtipoempresa",align:"left"},{name:"flag_gasolinera",label:"Es Gasolinera",field:"flag_gasolinera",align:"left",format:o=>o?"S\xED":"No"},{name:"flag_hotel",label:"Es Hotel",field:"flag_hotel",align:"left",format:o=>o?"S\xED":"No"},{name:"activo",label:"Activo",field:"activo",align:"left",format:o=>o?"S\xED":"No"},{name:"distribucion",label:"Distribucion Ventas",field:"distribucion",align:"left"},{name:"acciones",label:"Acciones",field:"",align:"center",style:"width:100px"}],V=()=>{u.get("/contribuyentes").then(o=>{t.value=o.data})},h=()=>{m.show({message:"Cargando empresas"}),u.get("/empresas").then(o=>{e.value=o.data,m.hide()})},S=async()=>{if(m.show({message:"Guardando...",spinner:A}),i.value.id===null){const o={_nombre_empresa:i.value.nombre,_idcontribuyente:i.value.contribuyente,_idtipoempresa:i.value.tipoempresa,_flag_gasolinera:i.value.flag_gasolinera,_flag_hotel:i.value.flag_hotel,_us_crea:"usrtest",_flag_activo:!0,_idEmpresa:0,_distribucion:i.value.distribucionVentas,_codigo_establecimiento:Number(i.value.codigo_establecimiento)};await u.post("empresas",o).then(d=>{Q("Empresa guardada correctamente!")})}else{const o={_nombre_empresa:i.value.nombre,_idcontribuyente:i.value.contribuyente,_idtipoempresa:i.value.tipoempresa,_flag_gasolinera:i.value.flag_gasolinera,_flag_hotel:i.value.flag_hotel,_us_crea:"usrtest",_flag_activo:i.value.activo,_idEmpresa:i.value.id,_distribucion:i.value.distribucionVentas,_codigo_establecimiento:Number(i.value.codigo_establecimiento)};await u.put("empresas",o).then(d=>{Q("Empresa guardada correctamente!")})}m.hide(),h(),E()},N=o=>{i.value={id:o.id,nombre:o.nombre_empresa,contribuyente:o.idcontribuyente,tipoempresa:o.idtipoempresa,flag_gasolinera:o.flag_gasolinera,flag_hotel:o.flag_hotel,activo:o.activo,distribucionVentas:o.distribucion,codigo_establecimiento:o.codigo_establecimiento}},E=()=>{i.value={id:null,nombre:"",contribuyente:"",tipoempresa:"",flag_gasolinera:!1,flag_hotel:!1,activo:!0,distribucionVentas:"",codigo_establecimiento:null}};return{empresas:e,contribuyentes:t,tiposEmpresa:v,form:i,filtro:p,columns:l,distribuciones:y,getContribuyentes:V,getEmpresas:h,resetForm:E,guardarEmpresa:S,editarEmpresa:N,filtrarEmpresas:()=>{const o=p.value.toLowerCase();return e.value.filter(d=>d.nombre_empresa.toLowerCase().includes(o)||d.idcontribuyente.toString().toLowerCase().includes(o)||d.idtipoempresa.toString().toLowerCase().includes(o))}}},mounted(){this.getEmpresas(),this.getContribuyentes()}}),P={class:"q-pa-sm"},I={class:"row q-col-gutter-sm"},j={class:"col-10"},M={class:"text-subtitle2"},z={class:"col-2"},J={class:"col-6"},K={class:"col-3"},O={class:"col-3"},R={class:"col-2"},W={class:"col-4"},X={class:"col-2"},Y=s("div",{class:"col-12"},null,-1),Z={class:"col-12 text-center q-gutter-md"},x=s("div",{class:"text-h5"},"Empresas",-1);function ee(e,t,v,y,i,p){return F(),q("div",P,[a(B,null,{default:n(()=>[a(c,{label:"Home",icon:"home"}),a(c,{label:"Configuraci\xF3n",icon:"settings"}),a(c,{label:"Gesti\xF3n de Empresas",icon:"apartment"})]),_:1}),a(w,{class:"q-mt-md"},{default:n(()=>[a(C,null,{default:n(()=>[a(L,{onSubmit:D(e.guardarEmpresa,["prevent"])},{default:n(()=>[s("div",I,[s("div",j,[a(b,{modelValue:e.form.nombre,"onUpdate:modelValue":t[0]||(t[0]=l=>e.form.nombre=l),label:"Nombre de la empresa",outlined:"",dense:""},{prepend:n(()=>[s("div",M,G(e.form.id),1)]),_:1},8,["modelValue"])]),s("div",z,[a(b,{modelValue:e.form.codigo_establecimiento,"onUpdate:modelValue":t[1]||(t[1]=l=>e.form.codigo_establecimiento=l),type:"number",label:"C\xF3digo Establecimiento",outlined:"",dense:""},null,8,["modelValue"])]),s("div",J,[a(_,{modelValue:e.form.contribuyente,"onUpdate:modelValue":t[2]||(t[2]=l=>e.form.contribuyente=l),options:e.contribuyentes,label:"Contribuyente",outlined:"",dense:"","emit-value":"","map-options":"","option-value":"id","option-label":"nombre_contribuyente"},null,8,["modelValue","options"])]),s("div",K,[a(_,{modelValue:e.form.tipoempresa,"onUpdate:modelValue":t[3]||(t[3]=l=>e.form.tipoempresa=l),options:e.tiposEmpresa,label:"Tipo de Empresa",outlined:"",dense:"","emit-value":"","map-options":"","option-value":"id","option-label":"tipo_empresa"},null,8,["modelValue","options"])]),s("div",O,[a(_,{modelValue:e.form.distribucionVentas,"onUpdate:modelValue":t[4]||(t[4]=l=>e.form.distribucionVentas=l),options:e.distribuciones,label:"Distribuci\xF3n de ventas",outlined:"",dense:"","emit-value":"","map-options":"","option-value":"tipo","option-label":"tipo"},null,8,["modelValue","options"])]),s("div",R,[a(f,{modelValue:e.form.flag_gasolinera,"onUpdate:modelValue":t[5]||(t[5]=l=>e.form.flag_gasolinera=l),label:"Es Gasolinera"},null,8,["modelValue"])]),s("div",W,[a(f,{modelValue:e.form.flag_hotel,"onUpdate:modelValue":t[6]||(t[6]=l=>e.form.flag_hotel=l),label:"Es Hotel"},null,8,["modelValue"])]),s("div",X,[a(f,{modelValue:e.form.activo,"onUpdate:modelValue":t[7]||(t[7]=l=>e.form.activo=l),label:"Activo","left-label":"",class:"toggle-center-div-dense"},null,8,["modelValue"])]),Y,s("div",Z,[a(g,{type:"submit",label:"Guardar",color:"primary",push:"",class:"btn-fixed-width"}),a(g,{label:"Cancelar",color:"primary",flat:"",class:"btn-fixed-width",onClick:e.resetForm},null,8,["onClick"])])])]),_:1},8,["onSubmit"])]),_:1})]),_:1}),a(w,{class:"q-my-md"},{default:n(()=>[a(C,null,{default:n(()=>[x,a(b,{modelValue:e.filtro,"onUpdate:modelValue":t[8]||(t[8]=l=>e.filtro=l),label:"Buscar empresas",outlined:"",dense:"",class:"q-my-md"},null,8,["modelValue"]),a(T,{style:{height:"400px"},flat:"","virtual-scroll":"",separator:"cell",bordered:"","rows-per-page-options":[0],class:"my-sticky-header-table",rows:e.filtrarEmpresas(),columns:e.columns,"row-key":"id"},{"body-cell-acciones":n(l=>[a($,{props:l},{default:n(()=>[a(g,{icon:"edit",color:"primary",dense:"",onClick:V=>e.editarEmpresa(l.row)},null,8,["onClick"])]),_:2},1032,["props"])]),_:1},8,["rows","columns"])]),_:1})]),_:1})])}var ue=U(H,[["render",ee]]);export{ue as default};
