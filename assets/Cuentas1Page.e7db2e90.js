import{_ as V,d as y,g as m,o as S,ax as k,w as n,P as B,a as i,e as o,i as w,aA as N,f as r,j as c,b8 as $,l as f,Q as h}from"./index.d9695857.js";import{Q as q}from"./QForm.d96e864f.js";import{Q as A,a as P}from"./QTable.51545b81.js";import{Q as D}from"./QPage.6f512fb8.js";import{Q as F}from"./QSpinnerBall.c9c92c03.js";import{a as p,s as Q}from"./axios.d44cf039.js";import"./QList.88bd2d48.js";import"./QSelect.c6280892.js";import"./selection.e66135a6.js";const U=y({setup(){const e=m([]),a=m({id:0,nombre:"",activo:!1}),d=m(""),v=[{name:"id",label:"ID",field:"id_generico",align:"left"},{name:"nombre",label:"Nombre",field:"nombre",align:"left"},{name:"activo",label:"Activo",field:"activo",align:"left",format:l=>l?"S\xED":"No"},{name:"acciones",label:"Acciones",field:"",align:"center"}],u=()=>{const l=B.getItem("empresa");let s;if(l)s=JSON.parse(l.toString()).id;else{alert("Debe seleccionar una empresa");return}i.show({message:"Cargando cuentas..."}),p.get("cuentasn1",{params:{id_empresa:s}}).then(_=>{e.value=_.data,i.hide()})},b=async()=>{if(i.show({message:"Guardando cuenta...",spinner:F}),a.value.id===null||a.value.id===0){const l={_nombre:a.value.nombre,_us_crea:"usrtest",_id:0,_activo:!0};await p.post("cuentasn1",l).then(s=>{Q("Cuenta nivel 1 guardada correctamente.")})}else{const l={_nombre:a.value.nombre,_us_crea:"usrtest",_id:a.value.id,_activo:a.value.activo};await p.put("cuentasn1",l).then(s=>{Q("Cuenta nivel 1 guardada correctamente.")})}i.hide(),u(),C()},t=l=>{a.value={...l}},g=l=>{e.value=e.value.filter(s=>s.id!==l)},C=()=>{a.value={id:0,nombre:"",activo:!1}};return{cuentas:e,form:a,filtro:d,columns:v,resetForm:C,getCuentas:u,guardarCuenta:b,editarCuenta:t,eliminarCuenta:g,filtrarCuentas:()=>{const l=d.value.toLowerCase();return e.value.filter(s=>s.id.toString().includes(l)||s.nombre.toLowerCase().includes(l)||(s.activo?"s\xED":"no").includes(l))}}},mounted(){this.getCuentas()}}),E={class:"row q-col-gutter-sm"},I={class:"col-2"},L={class:"col-9"},T={class:"col-1"},G=r("div",{class:"col-12"},null,-1),j={class:"col-12 text-center q-gutter-sm"},J=r("div",{class:"text-h5"},"Cuentas nivel 1",-1);function M(e,a,d,v,u,b){return S(),k(D,{padding:""},{default:n(()=>[o(h,{class:"q-mt-md"},{default:n(()=>[o(w,null,{default:n(()=>[o(q,{onSubmit:N(e.guardarCuenta,["prevent"])},{default:n(()=>[r("div",E,[r("div",I,[o(c,{modelValue:e.form.id,"onUpdate:modelValue":a[0]||(a[0]=t=>e.form.id=t),label:"C\xF3digo",outlined:"",dense:"",disable:""},null,8,["modelValue"])]),r("div",L,[o(c,{modelValue:e.form.nombre,"onUpdate:modelValue":a[1]||(a[1]=t=>e.form.nombre=t),label:"Nombre",outlined:"",dense:""},null,8,["modelValue"])]),r("div",T,[o($,{modelValue:e.form.activo,"onUpdate:modelValue":a[2]||(a[2]=t=>e.form.activo=t),label:"Activo","left-label":""},null,8,["modelValue"])]),G,r("div",j,[o(f,{type:"submit",label:"Guardar",color:"primary",push:"",class:"btn-fixed-width",disable:!0}),o(f,{label:"Cancelar",color:"primary",flat:"",class:"btn-fixed-width",onClick:e.resetForm},null,8,["onClick"])])])]),_:1},8,["onSubmit"])]),_:1})]),_:1}),o(h,{class:"q-my-md"},{default:n(()=>[o(w,null,{default:n(()=>[J,o(c,{modelValue:e.filtro,"onUpdate:modelValue":a[3]||(a[3]=t=>e.filtro=t),label:"Buscar",outlined:"",dense:"",class:"q-my-md"},null,8,["modelValue"]),o(A,{style:{height:"400px"},flat:"","virtual-scroll":"",separator:"cell",bordered:"","rows-per-page-options":[0],class:"my-sticky-header-table",rows:e.filtrarCuentas(),columns:e.columns,"row-key":"id"},{"body-cell-acciones":n(t=>[o(P,{props:t},{default:n(()=>[o(f,{icon:"edit",color:"primary",dense:"",onClick:g=>e.editarCuenta(t.row),disable:!0},null,8,["onClick"])]),_:2},1032,["props"])]),_:1},8,["rows","columns"])]),_:1})]),_:1})]),_:1})}var ee=V(U,[["render",M]]);export{ee as default};
