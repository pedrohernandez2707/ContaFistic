import{_ as h,d as V,g as m,o as y,c as Q,e,w as s,Q as b,b7 as k,P as q,i as C,aA as N,f as n,j as f,b8 as A,l as p}from"./index.de91045c.js";import{Q as B}from"./QForm.a37c3e13.js";import{Q as S,a as $}from"./QTable.ff5ff233.js";import{a as g,s as _}from"./axios.23fd2c5d.js";import"./QList.35154e5b.js";import"./QSelect.2ed87d02.js";import"./selection.4860df2b.js";const L=V({setup(){const o=[{name:"nombre",label:"Nombre",field:"nombre",align:"left"},{name:"registro",label:"Registro",field:"registro",align:"left"},{name:"activo",label:"Activo",field:"activo",align:"left",format:l=>l?"S\xED":"No"},{name:"acciones",label:"Acciones",field:"",align:"center",style:"width: 100px"}],a=m([]),r=m({idcontador:null,nombre:"",registro:"",activo:!0}),i=m(""),c=()=>{g.get("/contadores").then(l=>{a.value=l.data})},v=async()=>{const l=q.getItem("user");if(r.value.idcontador===null){const d={_nombre:r.value.nombre,_registro:r.value.registro,_us_crea:l,_idContador:null,_activo:!0};await g.post("/contadores",d).then(w=>{_("Contador guardado correctamente.",{})})}else{const d={_nombre:r.value.nombre,_registro:r.value.registro,_us_crea:l,_idContador:r.value.idcontador,_activo:r.value.activo};await g.put("/contadores",d).then(w=>{_("Contador guardado correctamente.",{})})}u(),c()},t=l=>{r.value={...l}},u=()=>{r.value={idcontador:0,nombre:"",registro:"",activo:!0}};return{contadores:a,form:r,filtro:i,columns:o,guardarContador:v,editarContador:t,resetForm:u,filtrarContadores:()=>{const l=i.value.toLowerCase();return a.value.filter(d=>d.nombre.toLowerCase().includes(l)||d.registro.toLowerCase().includes(l))},getContadores:c}},mounted(){this.getContadores()}}),U={class:"q-pa-md"},F={class:"row q-col-gutter-sm"},P={class:"col-6"},T={class:"col-4"},E={class:"col-1"},I=n("div",{class:"col-12"},null,-1),R={class:"col-12 text-center q-pa-md q-gutter-md"},j=n("div",{class:"text-h5"},"Contadores",-1);function D(o,a,r,i,c,v){return y(),Q("div",U,[e(b,{class:"q-mt-md"},{default:s(()=>[e(C,null,{default:s(()=>[e(B,{onSubmit:N(o.guardarContador,["prevent"])},{default:s(()=>[n("div",F,[n("div",P,[e(f,{modelValue:o.form.nombre,"onUpdate:modelValue":a[0]||(a[0]=t=>o.form.nombre=t),label:"Nombre del contador",outlined:""},null,8,["modelValue"])]),n("div",T,[e(f,{modelValue:o.form.registro,"onUpdate:modelValue":a[1]||(a[1]=t=>o.form.registro=t),label:"No. Registro",outlined:""},null,8,["modelValue"])]),n("div",E,[e(A,{modelValue:o.form.activo,"onUpdate:modelValue":a[2]||(a[2]=t=>o.form.activo=t),label:"Activo","left-label":"",class:"toggle-center-div"},null,8,["modelValue"])]),I,n("div",R,[e(p,{type:"submit",label:"Guardar",color:"primary",push:"",class:"btn-fixed-width"}),e(p,{label:"Cancelar",color:"primary",flat:"",class:"btn-fixed-width",onClick:o.resetForm},null,8,["onClick"])])])]),_:1},8,["onSubmit"])]),_:1})]),_:1}),e(k,{spaced:"",dark:""}),e(b,{class:"my-card"},{default:s(()=>[e(C,null,{default:s(()=>[j,e(f,{modelValue:o.filtro,"onUpdate:modelValue":a[3]||(a[3]=t=>o.filtro=t),label:"Buscar Contador",outlined:"",dense:"",class:"q-my-md"},null,8,["modelValue"]),e(S,{style:{height:"400px"},flat:"",bordered:"","virtual-scroll":"",separator:"cell","rows-per-page-options":[0],class:"my-sticky-header-table",rows:o.filtrarContadores(),columns:o.columns,"row-key":"id"},{"body-cell-acciones":s(t=>[e($,{props:t},{default:s(()=>[e(p,{icon:"edit",color:"primary",dense:"",onClick:u=>o.editarContador(t.row)},null,8,["onClick"])]),_:2},1032,["props"])]),_:1},8,["rows","columns"])]),_:1})]),_:1})])}var X=h(L,[["render",D]]);export{X as default};
