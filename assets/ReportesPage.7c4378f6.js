import{a as U,Q as q}from"./QBreadcrumbs.77656000.js";import{h as f}from"./QSelect.6c525bb7.js";import{y as t,I as $,bn as D,bo as k,_ as O,d as J,g as d,o as H,aF as Y,w as s,a as b,e as a,i as L,f as n,j as P,bl as K,Q as w,ap as W,bx as i,l as V}from"./index.03b32b94.js";import{Q as X,a as Q,b as Z,c as R}from"./QTabPanels.06dd055b.js";import{Q as x}from"./QPage.e7dfedc0.js";import{a as c,s as F,d as _}from"./axios.1ea36c68.js";import"./selection.16f4a865.js";import"./touch.4dc18614.js";import"./use-render-cache.3aae9b27.js";const ee=[t("circle",{cx:"15",cy:"15",r:"15"},[t("animate",{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}),t("animate",{attributeName:"fill-opacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"})]),t("circle",{cx:"60",cy:"15",r:"9","fill-opacity":".3"},[t("animate",{attributeName:"r",from:"9",to:"9",begin:"0s",dur:"0.8s",values:"9;15;9",calcMode:"linear",repeatCount:"indefinite"}),t("animate",{attributeName:"fill-opacity",from:".5",to:".5",begin:"0s",dur:"0.8s",values:".5;1;.5",calcMode:"linear",repeatCount:"indefinite"})]),t("circle",{cx:"105",cy:"15",r:"15"},[t("animate",{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}),t("animate",{attributeName:"fill-opacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"})])];var le=$({name:"QSpinnerDots",props:D,setup(e){const{cSize:l,classes:m}=k(e);return()=>t("svg",{class:m.value,fill:"currentColor",width:l.value,height:l.value,viewBox:"0 0 120 30",xmlns:"http://www.w3.org/2000/svg"},ee)}});const oe=[t("g",{transform:"translate(-20,-20)"},[t("path",{d:"M79.9,52.6C80,51.8,80,50.9,80,50s0-1.8-0.1-2.6l-5.1-0.4c-0.3-2.4-0.9-4.6-1.8-6.7l4.2-2.9c-0.7-1.6-1.6-3.1-2.6-4.5 L70,35c-1.4-1.9-3.1-3.5-4.9-4.9l2.2-4.6c-1.4-1-2.9-1.9-4.5-2.6L59.8,27c-2.1-0.9-4.4-1.5-6.7-1.8l-0.4-5.1C51.8,20,50.9,20,50,20 s-1.8,0-2.6,0.1l-0.4,5.1c-2.4,0.3-4.6,0.9-6.7,1.8l-2.9-4.1c-1.6,0.7-3.1,1.6-4.5,2.6l2.1,4.6c-1.9,1.4-3.5,3.1-5,4.9l-4.5-2.1 c-1,1.4-1.9,2.9-2.6,4.5l4.1,2.9c-0.9,2.1-1.5,4.4-1.8,6.8l-5,0.4C20,48.2,20,49.1,20,50s0,1.8,0.1,2.6l5,0.4 c0.3,2.4,0.9,4.7,1.8,6.8l-4.1,2.9c0.7,1.6,1.6,3.1,2.6,4.5l4.5-2.1c1.4,1.9,3.1,3.5,5,4.9l-2.1,4.6c1.4,1,2.9,1.9,4.5,2.6l2.9-4.1 c2.1,0.9,4.4,1.5,6.7,1.8l0.4,5.1C48.2,80,49.1,80,50,80s1.8,0,2.6-0.1l0.4-5.1c2.3-0.3,4.6-0.9,6.7-1.8l2.9,4.2 c1.6-0.7,3.1-1.6,4.5-2.6L65,69.9c1.9-1.4,3.5-3,4.9-4.9l4.6,2.2c1-1.4,1.9-2.9,2.6-4.5L73,59.8c0.9-2.1,1.5-4.4,1.8-6.7L79.9,52.6 z M50,65c-8.3,0-15-6.7-15-15c0-8.3,6.7-15,15-15s15,6.7,15,15C65,58.3,58.3,65,50,65z",fill:"currentColor"},[t("animateTransform",{attributeName:"transform",type:"rotate",from:"90 50 50",to:"0 50 50",dur:"1s",repeatCount:"indefinite"})])]),t("g",{transform:"translate(20,20) rotate(15 50 50)"},[t("path",{d:"M79.9,52.6C80,51.8,80,50.9,80,50s0-1.8-0.1-2.6l-5.1-0.4c-0.3-2.4-0.9-4.6-1.8-6.7l4.2-2.9c-0.7-1.6-1.6-3.1-2.6-4.5 L70,35c-1.4-1.9-3.1-3.5-4.9-4.9l2.2-4.6c-1.4-1-2.9-1.9-4.5-2.6L59.8,27c-2.1-0.9-4.4-1.5-6.7-1.8l-0.4-5.1C51.8,20,50.9,20,50,20 s-1.8,0-2.6,0.1l-0.4,5.1c-2.4,0.3-4.6,0.9-6.7,1.8l-2.9-4.1c-1.6,0.7-3.1,1.6-4.5,2.6l2.1,4.6c-1.9,1.4-3.5,3.1-5,4.9l-4.5-2.1 c-1,1.4-1.9,2.9-2.6,4.5l4.1,2.9c-0.9,2.1-1.5,4.4-1.8,6.8l-5,0.4C20,48.2,20,49.1,20,50s0,1.8,0.1,2.6l5,0.4 c0.3,2.4,0.9,4.7,1.8,6.8l-4.1,2.9c0.7,1.6,1.6,3.1,2.6,4.5l4.5-2.1c1.4,1.9,3.1,3.5,5,4.9l-2.1,4.6c1.4,1,2.9,1.9,4.5,2.6l2.9-4.1 c2.1,0.9,4.4,1.5,6.7,1.8l0.4,5.1C48.2,80,49.1,80,50,80s1.8,0,2.6-0.1l0.4-5.1c2.3-0.3,4.6-0.9,6.7-1.8l2.9,4.2 c1.6-0.7,3.1-1.6,4.5-2.6L65,69.9c1.9-1.4,3.5-3,4.9-4.9l4.6,2.2c1-1.4,1.9-2.9,2.6-4.5L73,59.8c0.9-2.1,1.5-4.4,1.8-6.7L79.9,52.6 z M50,65c-8.3,0-15-6.7-15-15c0-8.3,6.7-15,15-15s15,6.7,15,15C65,58.3,58.3,65,50,65z",fill:"currentColor"},[t("animateTransform",{attributeName:"transform",type:"rotate",from:"0 50 50",to:"90 50 50",dur:"1s",repeatCount:"indefinite"})])])];var ae=$({name:"QSpinnerGears",props:D,setup(e){const{cSize:l,classes:m}=k(e);return()=>t("svg",{class:m.value,width:l.value,height:l.value,viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",xmlns:"http://www.w3.org/2000/svg"},oe)}});const re=J({setup(){const e=d("periodo"),l=d("diario"),m=d("diario"),C=d([]),g=d([]),y=d([]),o=d(""),E=d(1),S=d(),r=d({contribuyente:null,empresa:null,periodo:null,hastaCuenta:"",desdeCuenta:""}),z=()=>{r.value.contribuyente=null,r.value.empresa=null,r.value.periodo=null,r.value.hastaCuenta="",r.value.desdeCuenta=""},A=()=>{z(),c.get("/contribuyentes").then(u=>{C.value=u.data})},I=()=>{r.value.empresa=null,r.value.periodo=null,r.value.hastaCuenta="",r.value.desdeCuenta="",b.show({message:"Cargando empresas"}),c.get("/empresas/contribuyente",{params:{id_contribuyente:r.value.contribuyente.id}}).then(u=>{g.value=u.data,b.hide()})},T=()=>{r.value.empresa&&(r.value.periodo=null,c.get("/periodos/abiertos/"+r.value.empresa.id).then(u=>{y.value=u.data}))};return{generarReporte:async()=>{const{contribuyente:u,empresa:B,periodo:N,hastaCuenta:we,desdeCuenta:Qe}=r.value;if(!u||!B||!N){F("Contribuyente, Empresa y Periodo son obligatorios.",{tipo:"negative"});return}let v="",M="";e.value=="periodo"?(v=l.value,M="xperiodo_report"):e.value=="mes"&&(M="xmes_report",v=m.value),console.log(`/reportes/${v}`),b.show({message:"Obteniendo informaci\xF3n",spinner:le}),await c.get(`/reportes/${v}`,{params:{contribuyente:u.id,empresa:B.id,periodo:N.periodo}}).then(p=>{console.log("\u{1F680} ~ .then reportes ~ resp.data:",p.data),S.value=p.data}).catch(p=>{F(p),b.hide()});let G={reporte:`${v}${M}`,data:S.value},j="";b.show({message:"Construyendo reporte ",spinner:ae}),await c.post(_+j,G,{responseType:"blob"}).then(async p=>{const h=URL.createObjectURL(p.data);o.value=h}).finally(()=>{b.hide()})},scrReport:o,periodos:y,selectEmpresa:()=>{T(),E.value=r.value.empresa.correlativo_folio===null?1:r.value.empresa.correlativo_folio},getEmpresas:I,getContribuyentes:A,contribuyentes:C,empresas:g,form:r,folio:E,periodo:2023,mesInicial:d(null),mesFinal:d(null),mes:"",cuenta:"",proveedor:"",monto:null,sinMovimiento:!1,tab:e,reportePeriodo:l,reporteMes:m,meses:[{label:"Enero",value:1},{label:"Febrero",value:2},{label:"Marzo",value:3},{label:"Abril",value:4},{label:"Mayo",value:5},{label:"Junio",value:6},{label:"Julio",value:7},{label:"Agosto",value:8},{label:"Septiembre",value:9},{label:"Octubre",value:10},{label:"Noviembre",value:11},{label:"Diciembre",value:12}]}},mounted(){this.getContribuyentes()}}),te={class:""},ne={class:"row q-col-gutter-sm"},se={class:"col-xs-4"},ie={class:"col-xs-6"},de={class:"col-xs-2"},ue={class:"col-xs-2"},me={class:"col-xs-2"},pe={class:"col-xs-2"},be={class:"col-xs-2"},ve={class:"col-xs-3"},fe=n("div",{class:"row q-col-gutter-sm"},null,-1),Ve=n("br",null,null,-1),ce=n("br",null,null,-1),Ce={class:"row justify-end q-gutter-sm"},ge=n("br",null,null,-1),ye=["src"];function Me(e,l,m,C,g,y){return H(),Y(x,{padding:""},{default:s(()=>[a(q,null,{default:s(()=>[a(U,{label:"Sistema",icon:"home"}),a(U,{label:"Reportes",icon:"settings"}),a(U,{label:"Reportes",icon:"local_gas_station"})]),_:1}),a(w,{class:"q-mt-md"},{default:s(()=>[a(L,null,{default:s(()=>[n("div",te,[n("div",ne,[n("div",se,[a(f,{label:"Contribuyente",modelValue:e.form.contribuyente,"onUpdate:modelValue":[l[0]||(l[0]=o=>e.form.contribuyente=o),e.getEmpresas],outlined:"",dense:"",options:e.contribuyentes,"option-value":"id","option-label":"nombre_contribuyente"},null,8,["modelValue","options","onUpdate:modelValue"])]),n("div",ie,[a(f,{label:"Empresa",modelValue:e.form.empresa,"onUpdate:modelValue":[l[1]||(l[1]=o=>e.form.empresa=o),e.selectEmpresa],outlined:"",dense:"",options:e.empresas,"option-value":"id","option-label":"nombre_empresa"},null,8,["modelValue","options","onUpdate:modelValue"])]),n("div",de,[a(f,{label:"Per\xEDodo",modelValue:e.form.periodo,"onUpdate:modelValue":l[2]||(l[2]=o=>e.form.periodo=o),options:e.periodos,outlined:"",dense:"","option-label":"periodo","option-value":"periodo"},null,8,["modelValue","options"])]),n("div",ue,[a(P,{label:"Desde Cta.",modelValue:e.form.desdeCuenta,"onUpdate:modelValue":l[3]||(l[3]=o=>e.form.desdeCuenta=o),type:"text",outlined:"",dense:""},null,8,["modelValue"])]),n("div",me,[a(P,{label:"Hasta Cta.",modelValue:e.form.hastaCuenta,"onUpdate:modelValue":l[4]||(l[4]=o=>e.form.hastaCuenta=o),type:"text",outlined:"",dense:""},null,8,["modelValue"])]),n("div",pe,[a(f,{label:"Mes Inicial",modelValue:e.mesInicial,"onUpdate:modelValue":l[5]||(l[5]=o=>e.mesInicial=o),options:e.meses,"option-label":"label","option-value":"value",outlined:"",dense:""},null,8,["modelValue","options"])]),n("div",be,[a(f,{label:"Mes Final",modelValue:e.mesFinal,"onUpdate:modelValue":l[6]||(l[6]=o=>e.mesFinal=o),options:e.meses,"option-label":"label","option-value":"value",outlined:"",dense:""},null,8,["modelValue","options"])]),n("div",ve,[a(K,{modelValue:e.sinMovimiento,"onUpdate:modelValue":l[7]||(l[7]=o=>e.sinMovimiento=o),label:"Sin Movimiento"},null,8,["modelValue"])])]),fe]),Ve,a(w,null,{default:s(()=>[a(X,{modelValue:e.tab,"onUpdate:modelValue":l[8]||(l[8]=o=>e.tab=o),class:"text-bold"},{default:s(()=>[a(Q,{name:"periodo",label:"Reportes x Periodo"}),a(Q,{name:"mes",label:"Reportes al Mes"}),a(Q,{name:"compras",label:"Reportes de Compras y Ventas"})]),_:1},8,["modelValue"]),a(W),a(Z,{modelValue:e.tab,"onUpdate:modelValue":l[23]||(l[23]=o=>e.tab=o),animated:""},{default:s(()=>[a(R,{name:"periodo"},{default:s(()=>[a(i,{modelValue:e.reportePeriodo,"onUpdate:modelValue":l[9]||(l[9]=o=>e.reportePeriodo=o),val:"diario",label:"Diario"},null,8,["modelValue"]),a(i,{modelValue:e.reportePeriodo,"onUpdate:modelValue":l[10]||(l[10]=o=>e.reportePeriodo=o),val:"mayor",label:"Mayor"},null,8,["modelValue"]),a(i,{modelValue:e.reportePeriodo,"onUpdate:modelValue":l[11]||(l[11]=o=>e.reportePeriodo=o),val:"balance",label:"Balance"},null,8,["modelValue"]),a(i,{modelValue:e.reportePeriodo,"onUpdate:modelValue":l[12]||(l[12]=o=>e.reportePeriodo=o),val:"er_consolidado",label:"ER Consolidado"},null,8,["modelValue"]),a(i,{modelValue:e.reportePeriodo,"onUpdate:modelValue":l[13]||(l[13]=o=>e.reportePeriodo=o),val:"er_analitico",label:"ER Anal\xEDtio"},null,8,["modelValue"]),a(i,{modelValue:e.reportePeriodo,"onUpdate:modelValue":l[14]||(l[14]=o=>e.reportePeriodo=o),val:"balance_generalC",label:"BG Consolidado"},null,8,["modelValue"]),a(i,{modelValue:e.reportePeriodo,"onUpdate:modelValue":l[15]||(l[15]=o=>e.reportePeriodo=o),val:"balance_generalA",label:"BG Anal\xEDtico"},null,8,["modelValue"]),a(i,{modelValue:e.reportePeriodo,"onUpdate:modelValue":l[16]||(l[16]=o=>e.reportePeriodo=o),val:"flujo_efectivo",label:"Flujo de Efectivo"},null,8,["modelValue"])]),_:1}),a(R,{name:"mes"},{default:s(()=>[a(i,{modelValue:e.reporteMes,"onUpdate:modelValue":l[17]||(l[17]=o=>e.reporteMes=o),val:"diario",label:"Diario"},null,8,["modelValue"]),a(i,{modelValue:e.reporteMes,"onUpdate:modelValue":l[18]||(l[18]=o=>e.reporteMes=o),val:"mayor",label:"Mayor"},null,8,["modelValue"]),a(i,{modelValue:e.reporteMes,"onUpdate:modelValue":l[19]||(l[19]=o=>e.reporteMes=o),val:"balance",label:"Balance"},null,8,["modelValue"]),a(i,{modelValue:e.reporteMes,"onUpdate:modelValue":l[20]||(l[20]=o=>e.reporteMes=o),val:"estadoresultados",label:"Est. Resultados"},null,8,["modelValue"]),a(i,{modelValue:e.reporteMes,"onUpdate:modelValue":l[21]||(l[21]=o=>e.reporteMes=o),val:"balance_general",label:"Balance General"},null,8,["modelValue"]),a(i,{modelValue:e.reporteMes,"onUpdate:modelValue":l[22]||(l[22]=o=>e.reporteMes=o),val:"inventarios",label:"Inventarios"},null,8,["modelValue"])]),_:1}),a(R,{name:"compras"},{default:s(()=>[a(V,{label:"Compras",color:"primary"}),a(V,{label:"Ventas",color:"primary"})]),_:1})]),_:1},8,["modelValue"])]),_:1}),ce,n("div",Ce,[a(P,{modelValue:e.folio,"onUpdate:modelValue":l[26]||(l[26]=o=>e.folio=o),type:"number",label:"No. Folio",outlined:"",dense:"","hide-bottom-space":"",readonly:"",class:"col-2",rules:[o=>o>0||"No puede ser un folio negativo"]},{before:s(()=>[a(V,{round:"",dense:"",flat:"",icon:"remove",onClick:l[24]||(l[24]=o=>e.folio<=1?1:e.folio--),color:"red"})]),after:s(()=>[a(V,{round:"",dense:"",flat:"",icon:"add",onClick:l[25]||(l[25]=o=>e.folio++),color:"blue"})]),_:1},8,["modelValue","rules"]),a(V,{label:"Generar Reporte",color:"primary",onClick:e.generarReporte},null,8,["onClick"])])]),_:1})]),_:1}),ge,a(w,null,{default:s(()=>[a(L,null,{default:s(()=>[n("iframe",{src:e.scrReport,width:"100%",style:{height:"90vh"}},null,8,ye)]),_:1})]),_:1})]),_:1})}var ke=O(re,[["render",Me]]);export{ke as default};
