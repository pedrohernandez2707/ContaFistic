import{a as g,Q as N}from"./QBreadcrumbs.303160ea.js";import{h as m}from"./QSelect.88e97e4b.js";import{_ as T,d as q,g as t,o as J,aF as L,w as s,a as F,e as a,i as k,f as r,j as C,bl as O,Q as U,ap as z,bx as n,l as p}from"./index.bb4f25cd.js";import{Q as H,a as P,b as K,c as M}from"./QTabPanels.effad126.js";import{Q as W}from"./QPage.4580f26c.js";import{a as b,s as A}from"./axios.56cd7776.js";import"./selection.32bb6442.js";import"./touch.70011ee4.js";import"./use-render-cache.3aae9b27.js";const X=q({setup(){const e=t("periodo"),o=t("diario"),R=t("diario"),V=t([]),v=t([]),f=t([]),l=t(""),Q=t(1),E=t(),d=t({contribuyente:null,empresa:null,periodo:null,hastaCuenta:"",desdeCuenta:""}),D=()=>{b.get("/contribuyentes").then(i=>{V.value=i.data})},G=()=>{F.show({message:"Cargando empresas"}),b.get("/empresas/contribuyente",{params:{id_contribuyente:d.value.contribuyente.id}}).then(i=>{v.value=i.data,F.hide()})},I=()=>{d.value.empresa&&(d.value.periodo=null,b.get("/periodos/abiertos/"+d.value.empresa.id).then(i=>{f.value=i.data}))};return{generarReporte:async()=>{const{contribuyente:i,empresa:B,periodo:w,hastaCuenta:be,desdeCuenta:Ve}=d.value;if(!i||!B||!w){A("Contribuyente, Empresa y Periodo son obligatorios.",{tipo:"negative"});return}let $=o.value,y="";e.value=="periodo"?y="xperiodo_report":e.value=="mes"&&(y="xmes_report"),await b.get(`/reportes/${$}`,{params:{contribuyente:i.id,empresa:B.id,periodo:w.periodo}}).then(u=>{E.value=u.data}).catch(u=>{A(u)});let S={reporte:`${$}${y}`,data:E.value};b.post("http://localhost:3010/report",S,{responseType:"blob"}).then(async u=>{const j=URL.createObjectURL(u.data);l.value=j})},scrReport:l,periodos:f,selectEmpresa:()=>{I(),Q.value=d.value.empresa.correlativo_folio===null?1:d.value.empresa.correlativo_folio},getEmpresas:G,getContribuyentes:D,contribuyentes:V,empresas:v,form:d,folio:Q,periodo:2023,mesInicial:t(null),mesFinal:t(null),mes:"",cuenta:"",proveedor:"",monto:null,sinMovimiento:!1,tab:e,reportePeriodo:o,reporteMes:R,meses:[{label:"Enero",value:1},{label:"Febrero",value:2},{label:"Marzo",value:3},{label:"Abril",value:4},{label:"Mayo",value:5},{label:"Junio",value:6},{label:"Julio",value:7},{label:"Agosto",value:8},{label:"Septiembre",value:9},{label:"Octubre",value:10},{label:"Noviembre",value:11},{label:"Diciembre",value:12}]}},mounted(){this.getContribuyentes()}}),Y={class:""},Z={class:"row q-col-gutter-sm"},h={class:"col-xs-4"},c={class:"col-xs-6"},x={class:"col-xs-2"},_={class:"col-xs-2"},ee={class:"col-xs-2"},oe={class:"col-xs-2"},le={class:"col-xs-2"},ae={class:"col-xs-3"},re=r("div",{class:"row q-col-gutter-sm"},null,-1),se=r("br",null,null,-1),ne=r("br",null,null,-1),te={class:"row justify-end q-gutter-sm"},de=r("br",null,null,-1),ie=["src"];function ue(e,o,R,V,v,f){return J(),L(W,{padding:""},{default:s(()=>[a(N,null,{default:s(()=>[a(g,{label:"Sistema",icon:"home"}),a(g,{label:"Reportes",icon:"settings"}),a(g,{label:"Reportes",icon:"local_gas_station"})]),_:1}),a(U,{class:"q-mt-md"},{default:s(()=>[a(k,null,{default:s(()=>[r("div",Y,[r("div",Z,[r("div",h,[a(m,{label:"Contribuyente",modelValue:e.form.contribuyente,"onUpdate:modelValue":[o[0]||(o[0]=l=>e.form.contribuyente=l),e.getEmpresas],outlined:"",dense:"",options:e.contribuyentes,"option-value":"id","option-label":"nombre_contribuyente"},null,8,["modelValue","options","onUpdate:modelValue"])]),r("div",c,[a(m,{label:"Empresa",modelValue:e.form.empresa,"onUpdate:modelValue":[o[1]||(o[1]=l=>e.form.empresa=l),e.selectEmpresa],outlined:"",dense:"",options:e.empresas,"option-value":"id","option-label":"nombre_empresa"},null,8,["modelValue","options","onUpdate:modelValue"])]),r("div",x,[a(m,{label:"Per\xEDodo",modelValue:e.form.periodo,"onUpdate:modelValue":o[2]||(o[2]=l=>e.form.periodo=l),options:e.periodos,outlined:"",dense:"","option-label":"periodo","option-value":"periodo"},null,8,["modelValue","options"])]),r("div",_,[a(C,{label:"Desde Cta.",modelValue:e.form.desdeCuenta,"onUpdate:modelValue":o[3]||(o[3]=l=>e.form.desdeCuenta=l),type:"text",outlined:"",dense:""},null,8,["modelValue"])]),r("div",ee,[a(C,{label:"Hasta Cta.",modelValue:e.form.hastaCuenta,"onUpdate:modelValue":o[4]||(o[4]=l=>e.form.hastaCuenta=l),type:"text",outlined:"",dense:""},null,8,["modelValue"])]),r("div",oe,[a(m,{label:"Mes Inicial",modelValue:e.mesInicial,"onUpdate:modelValue":o[5]||(o[5]=l=>e.mesInicial=l),options:e.meses,"option-label":"label","option-value":"value",outlined:"",dense:""},null,8,["modelValue","options"])]),r("div",le,[a(m,{label:"Mes Final",modelValue:e.mesFinal,"onUpdate:modelValue":o[6]||(o[6]=l=>e.mesFinal=l),options:e.meses,"option-label":"label","option-value":"value",outlined:"",dense:""},null,8,["modelValue","options"])]),r("div",ae,[a(O,{modelValue:e.sinMovimiento,"onUpdate:modelValue":o[7]||(o[7]=l=>e.sinMovimiento=l),label:"Sin Movimiento"},null,8,["modelValue"])])]),re]),se,a(U,null,{default:s(()=>[a(H,{modelValue:e.tab,"onUpdate:modelValue":o[8]||(o[8]=l=>e.tab=l),class:"text-bold"},{default:s(()=>[a(P,{name:"periodo",label:"Reportes x Periodo"}),a(P,{name:"mes",label:"Reportes al Mes"}),a(P,{name:"compras",label:"Reportes de Compras y Ventas"})]),_:1},8,["modelValue"]),a(z),a(K,{modelValue:e.tab,"onUpdate:modelValue":o[23]||(o[23]=l=>e.tab=l),animated:""},{default:s(()=>[a(M,{name:"periodo"},{default:s(()=>[a(n,{modelValue:e.reportePeriodo,"onUpdate:modelValue":o[9]||(o[9]=l=>e.reportePeriodo=l),val:"diario",label:"Diario"},null,8,["modelValue"]),a(n,{modelValue:e.reportePeriodo,"onUpdate:modelValue":o[10]||(o[10]=l=>e.reportePeriodo=l),val:"mayor",label:"Mayor"},null,8,["modelValue"]),a(n,{modelValue:e.reportePeriodo,"onUpdate:modelValue":o[11]||(o[11]=l=>e.reportePeriodo=l),val:"balance",label:"Balance"},null,8,["modelValue"]),a(n,{modelValue:e.reportePeriodo,"onUpdate:modelValue":o[12]||(o[12]=l=>e.reportePeriodo=l),val:"ERC",label:"ER Consolidado"},null,8,["modelValue"]),a(n,{modelValue:e.reportePeriodo,"onUpdate:modelValue":o[13]||(o[13]=l=>e.reportePeriodo=l),val:"ERA",label:"ER Anal\xEDtio"},null,8,["modelValue"]),a(n,{modelValue:e.reportePeriodo,"onUpdate:modelValue":o[14]||(o[14]=l=>e.reportePeriodo=l),val:"BGC",label:"BG Consolidado"},null,8,["modelValue"]),a(n,{modelValue:e.reportePeriodo,"onUpdate:modelValue":o[15]||(o[15]=l=>e.reportePeriodo=l),val:"BGA",label:"BG Anal\xEDtico"},null,8,["modelValue"]),a(n,{modelValue:e.reportePeriodo,"onUpdate:modelValue":o[16]||(o[16]=l=>e.reportePeriodo=l),val:"flujo",label:"Flujo de Efectivo"},null,8,["modelValue"])]),_:1}),a(M,{name:"mes"},{default:s(()=>[a(n,{modelValue:e.reporteMes,"onUpdate:modelValue":o[17]||(o[17]=l=>e.reporteMes=l),val:"diario",label:"Diario"},null,8,["modelValue"]),a(n,{modelValue:e.reporteMes,"onUpdate:modelValue":o[18]||(o[18]=l=>e.reporteMes=l),val:"mayor",label:"Mayor"},null,8,["modelValue"]),a(n,{modelValue:e.reporteMes,"onUpdate:modelValue":o[19]||(o[19]=l=>e.reporteMes=l),val:"balance",label:"Balance"},null,8,["modelValue"]),a(n,{modelValue:e.reporteMes,"onUpdate:modelValue":o[20]||(o[20]=l=>e.reporteMes=l),val:"resultados",label:"Est. Resultados"},null,8,["modelValue"]),a(n,{modelValue:e.reporteMes,"onUpdate:modelValue":o[21]||(o[21]=l=>e.reporteMes=l),val:"bgeneral",label:"Balance General"},null,8,["modelValue"]),a(n,{modelValue:e.reporteMes,"onUpdate:modelValue":o[22]||(o[22]=l=>e.reporteMes=l),val:"inventarios",label:"Inventarios"},null,8,["modelValue"])]),_:1}),a(M,{name:"compras"},{default:s(()=>[a(p,{label:"Compras",color:"primary"}),a(p,{label:"Ventas",color:"primary"})]),_:1})]),_:1},8,["modelValue"])]),_:1}),ne,r("div",te,[a(C,{modelValue:e.folio,"onUpdate:modelValue":o[26]||(o[26]=l=>e.folio=l),type:"number",label:"No. Folio",outlined:"",dense:"","hide-bottom-space":"",readonly:"",class:"col-2",rules:[l=>l>0||"No puede ser un folio negativo"]},{before:s(()=>[a(p,{round:"",dense:"",flat:"",icon:"remove",onClick:o[24]||(o[24]=l=>e.folio<=1?1:e.folio--),color:"red"})]),after:s(()=>[a(p,{round:"",dense:"",flat:"",icon:"add",onClick:o[25]||(o[25]=l=>e.folio++),color:"blue"})]),_:1},8,["modelValue","rules"]),a(p,{label:"Generar Reporte",color:"primary",onClick:e.generarReporte},null,8,["onClick"])])]),_:1})]),_:1}),de,a(U,null,{default:s(()=>[a(k,null,{default:s(()=>[r("iframe",{src:e.scrReport,width:"100%",style:{height:"90vh"}},null,8,ie)]),_:1})]),_:1})]),_:1})}var Qe=T(X,[["render",ue]]);export{Qe as default};
