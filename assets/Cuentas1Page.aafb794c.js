import{a as m,Q as V}from"./QBreadcrumbs.b9ecd164.js";import{_ as y,d as k,g as c,o as B,aE as S,w as s,a as i,e as o,i as w,aH as F,f as r,j as f,b9 as N,k as p,Q as h}from"./index.0eec7d61.js";import{Q as q}from"./QForm.dae60f18.js";import{Q as $,a as A}from"./QTable.98473d7d.js";import{Q as E}from"./QPage.77f2892e.js";import{Q as U}from"./QSpinnerBall.3cf509c1.js";import{a as b,s as Q}from"./axios.fd32a7ae.js";import"./QList.0654ade3.js";import"./QSelect.288c6f09.js";import"./selection.4a7e3af3.js";const D=k({setup(){const e=c([]),a=c({id:0,nombre:"",activo:!1}),d=c(""),v=[{name:"id",label:"ID",field:"id",align:"left"},{name:"nombre",label:"Nombre",field:"nombre",align:"left"},{name:"activo",label:"Activo",field:"activo",align:"left",format:l=>l?"S\xED":"No"},{name:"acciones",label:"Acciones",field:"",align:"center"}],u=()=>{i.show({message:"Cargando cuentas..."}),b.get("cuentasn1").then(l=>{e.value=l.data,i.hide()})},g=async()=>{if(i.show({message:"Guardando cuenta...",spinner:U}),a.value.id===null||a.value.id===0){const l={_nombre:a.value.nombre,_us_crea:"usrtest",_id:0,_activo:!0};await b.post("cuentasn1",l).then(n=>{Q("Cuenta nivel 1 guardada correctamente.")})}else{const l={_nombre:a.value.nombre,_us_crea:"usrtest",_id:a.value.id,_activo:a.value.activo};await b.put("cuentasn1",l).then(n=>{Q("Cuenta nivel 1 guardada correctamente.")})}i.hide(),u(),_()},t=l=>{a.value={...l}},C=l=>{e.value=e.value.filter(n=>n.id!==l)},_=()=>{a.value={id:0,nombre:"",activo:!1}};return{cuentas:e,form:a,filtro:d,columns:v,resetForm:_,getCuentas:u,guardarCuenta:g,editarCuenta:t,eliminarCuenta:C,filtrarCuentas:()=>{const l=d.value.toLowerCase();return e.value.filter(n=>n.id.toString().includes(l)||n.nombre.toLowerCase().includes(l)||(n.activo?"s\xED":"no").includes(l))}}},mounted(){this.getCuentas()}}),G={class:"row q-col-gutter-sm"},L={class:"col-2"},P={class:"col-9"},T={class:"col-1"},I=r("div",{class:"col-12"},null,-1),j={class:"col-12 text-center q-gutter-sm"},x=r("div",{class:"text-h5"},"Cuentas nivel 1",-1);function H(e,a,d,v,u,g){return B(),S(E,{padding:""},{default:s(()=>[o(V,null,{default:s(()=>[o(m,{label:"Sistema",icon:"home"}),o(m,{label:"Configuraci\xF3n",icon:"widgets"}),o(m,{label:"Gesti\xF3n de Cuentas Nivel 1",icon:"looks_one"})]),_:1}),o(h,{class:"q-mt-md"},{default:s(()=>[o(w,null,{default:s(()=>[o(q,{onSubmit:F(e.guardarCuenta,["prevent"])},{default:s(()=>[r("div",G,[r("div",L,[o(f,{modelValue:e.form.id,"onUpdate:modelValue":a[0]||(a[0]=t=>e.form.id=t),label:"C\xF3digo",outlined:"",dense:"",disable:""},null,8,["modelValue"])]),r("div",P,[o(f,{modelValue:e.form.nombre,"onUpdate:modelValue":a[1]||(a[1]=t=>e.form.nombre=t),label:"Nombre",outlined:"",dense:""},null,8,["modelValue"])]),r("div",T,[o(N,{modelValue:e.form.activo,"onUpdate:modelValue":a[2]||(a[2]=t=>e.form.activo=t),label:"Activo","left-label":""},null,8,["modelValue"])]),I,r("div",j,[o(p,{type:"submit",label:"Guardar",color:"primary",push:"",class:"btn-fixed-width"}),o(p,{label:"Cancelar",color:"primary",flat:"",class:"btn-fixed-width",onClick:e.resetForm},null,8,["onClick"])])])]),_:1},8,["onSubmit"])]),_:1})]),_:1}),o(h,{class:"q-my-md"},{default:s(()=>[o(w,null,{default:s(()=>[x,o(f,{modelValue:e.filtro,"onUpdate:modelValue":a[3]||(a[3]=t=>e.filtro=t),label:"Buscar",outlined:"",dense:"",class:"q-my-md"},null,8,["modelValue"]),o($,{style:{height:"400px"},flat:"","virtual-scroll":"",separator:"cell",bordered:"","rows-per-page-options":[0],class:"my-sticky-header-table",rows:e.filtrarCuentas(),columns:e.columns,"row-key":"id"},{"body-cell-acciones":s(t=>[o(A,{props:t},{default:s(()=>[o(p,{icon:"edit",color:"primary",dense:"",onClick:C=>e.editarCuenta(t.row)},null,8,["onClick"])]),_:2},1032,["props"])]),_:1},8,["rows","columns"])]),_:1})]),_:1})]),_:1})}var ae=y(D,[["render",H]]);export{ae as default};
