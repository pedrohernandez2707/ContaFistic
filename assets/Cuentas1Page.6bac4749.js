import{a as m,Q as V}from"./QBreadcrumbs.31360e88.js";import{_ as y,U as k,r as c,V as B,aB as S,a1 as s,a as i,Z as l,a4 as h,b5 as F,$ as r,a5 as f,b6 as N,a6 as p,a2 as w}from"./index.2a212af4.js";import{Q as $}from"./QForm.fb281c9a.js";import{Q as q,a as U}from"./QTable.9a8fd894.js";import{Q as A}from"./QPage.21e0a9f6.js";import{Q as D}from"./QSpinnerBall.d26f6390.js";import{a as b,s as Q}from"./axios.1e7a8ac5.js";import"./QList.2d7172c3.js";import"./selection.ddfe4220.js";import"./axios.bf56c3c5.js";const E=k({setup(){const e=c([]),a=c({id:0,nombre:"",activo:!1}),d=c(""),v=[{name:"id",label:"ID",field:"id",align:"left"},{name:"nombre",label:"Nombre",field:"nombre",align:"left"},{name:"activo",label:"Activo",field:"activo",align:"left",format:o=>o?"S\xED":"No"},{name:"acciones",label:"Acciones",field:"",align:"center"}],u=()=>{i.show({message:"Cargando cuentas..."}),b.get("cuentasn1").then(o=>{e.value=o.data,i.hide()})},C=async()=>{if(i.show({message:"Guardando cuenta...",spinner:D}),a.value.id===null||a.value.id===0){const o={_nombre:a.value.nombre,_us_crea:"usrtest",_id:0,_activo:!0};await b.post("cuentasn1",o).then(n=>{Q("Cuenta nivel 1 guardada correctamente.")})}else{const o={_nombre:a.value.nombre,_us_crea:"usrtest",_id:a.value.id,_activo:a.value.activo};await b.put("cuentasn1",o).then(n=>{Q("Cuenta nivel 1 guardada correctamente.")})}i.hide(),u(),_()},t=o=>{a.value={...o}},g=o=>{e.value=e.value.filter(n=>n.id!==o)},_=()=>{a.value={id:0,nombre:"",activo:!1}};return{cuentas:e,form:a,filtro:d,columns:v,resetForm:_,getCuentas:u,guardarCuenta:C,editarCuenta:t,eliminarCuenta:g,filtrarCuentas:()=>{const o=d.value.toLowerCase();return e.value.filter(n=>n.id.toString().includes(o)||n.nombre.toLowerCase().includes(o)||(n.activo?"s\xED":"no").includes(o))}}},mounted(){this.getCuentas()}}),G={class:"row q-col-gutter-sm"},L={class:"col-2"},P={class:"col-9"},T={class:"col-1"},I=r("div",{class:"col-12"},null,-1),x={class:"col-12 text-center q-gutter-sm"},M=r("div",{class:"text-h5"},"Cuentas nivel 1",-1);function Z(e,a,d,v,u,C){return B(),S(A,{padding:""},{default:s(()=>[l(V,null,{default:s(()=>[l(m,{label:"Sistema",icon:"home"}),l(m,{label:"Configuraci\xF3n",icon:"widgets"}),l(m,{label:"Gesti\xF3n de Cuentas Nivel 1",icon:"looks_one"})]),_:1}),l(w,{class:"q-mt-md"},{default:s(()=>[l(h,null,{default:s(()=>[l($,{onSubmit:F(e.guardarCuenta,["prevent"])},{default:s(()=>[r("div",G,[r("div",L,[l(f,{modelValue:e.form.id,"onUpdate:modelValue":a[0]||(a[0]=t=>e.form.id=t),label:"C\xF3digo",outlined:"",dense:"",disable:""},null,8,["modelValue"])]),r("div",P,[l(f,{modelValue:e.form.nombre,"onUpdate:modelValue":a[1]||(a[1]=t=>e.form.nombre=t),label:"Nombre",outlined:"",dense:""},null,8,["modelValue"])]),r("div",T,[l(N,{modelValue:e.form.activo,"onUpdate:modelValue":a[2]||(a[2]=t=>e.form.activo=t),label:"Activo","left-label":""},null,8,["modelValue"])]),I,r("div",x,[l(p,{type:"submit",label:"Guardar",color:"primary",push:"",class:"btn-fixed-width"}),l(p,{label:"Cancelar",color:"primary",flat:"",class:"btn-fixed-width",onClick:e.resetForm},null,8,["onClick"])])])]),_:1},8,["onSubmit"])]),_:1})]),_:1}),l(w,{class:"q-my-md"},{default:s(()=>[l(h,null,{default:s(()=>[M,l(f,{modelValue:e.filtro,"onUpdate:modelValue":a[3]||(a[3]=t=>e.filtro=t),label:"Buscar",outlined:"",dense:"",class:"q-my-md"},null,8,["modelValue"]),l(q,{style:{height:"400px"},flat:"","virtual-scroll":"",separator:"cell",bordered:"","rows-per-page-options":[0],class:"my-sticky-header-table",rows:e.filtrarCuentas(),columns:e.columns,"row-key":"id"},{"body-cell-acciones":s(t=>[l(U,{props:t},{default:s(()=>[l(p,{icon:"edit",color:"primary",dense:"",onClick:g=>e.editarCuenta(t.row)},null,8,["onClick"])]),_:2},1032,["props"])]),_:1},8,["rows","columns"])]),_:1})]),_:1})]),_:1})}var ae=y(E,[["render",Z]]);export{ae as default};
