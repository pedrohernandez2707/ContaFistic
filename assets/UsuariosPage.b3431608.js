import{_ as w,d as y,g as t,o as Q,c as h,e as s,w as u,Q as b,i as V,aA as C,f as i,j as n,b8 as k,b7 as _,C as q,l as U}from"./index.de91045c.js";import{Q as P}from"./QForm.a37c3e13.js";import{Q as $,a as B}from"./QTable.ff5ff233.js";import{u as N}from"./use-quasar.1288554d.js";import{a as m}from"./axios.23fd2c5d.js";import"./QList.35154e5b.js";import"./QSelect.2ed87d02.js";import"./selection.4860df2b.js";const S=y({setup(){const o=N(),a=t([]),e=t({id_usuario:null,nombre_usuario:"",usuario:"",contrasena:"",direccion:"",telefono:"",correo:"",tipo_usuario:"",estado:!0}),c=t(""),f=[{name:"nombre",label:"Nombre",field:"nombre_usuario",align:"left"},{name:"usuario",label:"Usuario",field:"usuario",align:"left"},{name:"email",label:"Email",field:"correo",align:"left"},{name:"direccion",label:"Direccion",field:"direccion",align:"left"},{name:"telefono",label:"Tel",field:"telefono",align:"left"},{name:"activo",label:"Activo",field:"estado",align:"left",format:r=>r?"S\xED":"No"},{name:"acciones",label:"Acciones",field:"",align:"center",style:"width:100px"}],p=()=>{if(e.value.id_usuario){const r={id_usuario:parseInt(e.value.id_usuario),nombre_usuario:e.value.nombre_usuario,usuario:e.value.usuario,contrasena:e.value.contrasena,direccion:e.value.direccion===void 0?"":e.value.direccion,telefono:e.value.telefono===void 0?"":e.value.telefono,orreo:e.value.correo===void 0?"":e.value.correo,estado:e.value.estado,usuario_creo:"usrtest"};m.put("/usuarios",r).then(g=>{o.notify({message:"Usuario actualizado correctamente",color:"primary",position:"center",icon:"info",actions:[{label:"Ok",color:"white"}]}),l(),d()})}else{const r={nombre_usuario:e.value.nombre_usuario,usuario:e.value.usuario,contrasena:e.value.contrasena,direccion:e.value.direccion,telefono:e.value.telefono,correo:e.value.correo,estado:e.value.estado,usuario_creo:"usrtest"};m.post("/usuarios",r).then(g=>{o.notify({message:"Usuario creado correctamente",color:"primary",position:"center",icon:"info",actions:[{label:"Ok",color:"white"}]}),l(),d()})}},l=()=>{e.value.id_usuario=null,e.value.nombre_usuario="",e.value.contrasena="",e.value.usuario="",e.value.direccion="",e.value.telefono="",e.value.correo=""},v=r=>{e.value={...r}},d=()=>{m.get("/usuarios").then(r=>{a.value=r.data})};return{isPwd:t(!0),usuarios:a,form:e,columns:f,filtro:c,guardarUsuario:p,editarUsuario:v,getUsuarios:d}},mounted(){this.getUsuarios()}}),T={class:"q-pa-sm"},E={class:"row"},F={class:"col-xs-12 col-sm-2"},A={class:"col-xs-12 col-sm-8"},D={class:"col col-xs-12 col-sm-2"},I={class:"row"},M={class:"col-xs-12 col-sm-4"},j={class:"col-xs-12 col-sm-4"},z={class:"row"},O={class:"col-xs-12 col-sm-8"},G={class:"col-xs-12 col-sm-4"},H={class:"row"},J={class:"col-xs-12 col-sm-5 col-md-5"},K={class:"row justify-center q-ma-md"},L={class:"col-2"},R=i("div",{class:"text-h5"},"Usuarios",-1),W={style:{height:"400px","overflow-y":"auto"}};function X(o,a,e,c,f,p){return Q(),h("div",T,[s(b,null,{default:u(()=>[s(V,null,{default:u(()=>[s(P,{onSubmit:C(o.guardarUsuario,["prevent"])},{default:u(()=>[i("div",E,[i("div",F,[s(n,{modelValue:o.form.id_usuario,"onUpdate:modelValue":a[0]||(a[0]=l=>o.form.id_usuario=l),label:"C\xF3digo Usuario",outlined:"",dense:"",disable:""},null,8,["modelValue"])]),i("div",A,[s(n,{modelValue:o.form.nombre_usuario,"onUpdate:modelValue":a[1]||(a[1]=l=>o.form.nombre_usuario=l),label:"Nombre del usuario",outlined:"",dense:""},null,8,["modelValue"])]),i("div",D,[s(k,{label:"Estado",modelValue:o.form.estado,"onUpdate:modelValue":a[2]||(a[2]=l=>o.form.estado=l),color:"green",class:"q-ma-sm",dense:"",disable:!o.form.id_usuario,"left-label":""},null,8,["modelValue","disable"])])]),s(_,{spaced:"",inset:""}),i("div",I,[i("div",M,[s(n,{modelValue:o.form.usuario,"onUpdate:modelValue":a[3]||(a[3]=l=>o.form.usuario=l),label:"Usuario para el sistema",outlined:"",dense:""},null,8,["modelValue"])]),i("div",j,[s(n,{modelValue:o.form.contrasena,"onUpdate:modelValue":a[5]||(a[5]=l=>o.form.contrasena=l),label:"Contrase\xF1a para el sistema",outlined:"",dense:"",type:o.isPwd?"password":"text"},{append:u(()=>[s(q,{name:o.isPwd?"visibility_off":"visibility",class:"cursor-pointer",onClick:a[4]||(a[4]=l=>o.isPwd=!o.isPwd)},null,8,["name"])]),_:1},8,["modelValue","type"])])]),s(_,{spaced:"",inset:""}),i("div",z,[i("div",O,[s(n,{modelValue:o.form.direccion,"onUpdate:modelValue":a[6]||(a[6]=l=>o.form.direccion=l),label:"Direcci\xF3n",outlined:"",dense:""},null,8,["modelValue"])]),i("div",G,[s(n,{modelValue:o.form.telefono,"onUpdate:modelValue":a[7]||(a[7]=l=>o.form.telefono=l),label:"Telefono",outlined:"",dense:""},null,8,["modelValue"])])]),i("div",H,[i("div",J,[s(n,{modelValue:o.form.correo,"onUpdate:modelValue":a[8]||(a[8]=l=>o.form.correo=l),label:"Correo",outlined:"",dense:""},null,8,["modelValue"])])]),i("div",K,[i("div",L,[s(U,{type:"submit",label:o.form.id_usuario?"Guardar Usuario":"Crear Usuario",color:"primary",size:"md",outline:"",rounded:""},null,8,["label"])])])]),_:1},8,["onSubmit"])]),_:1})]),_:1}),s(b,{class:"q-my-md"},{default:u(()=>[s(V,null,{default:u(()=>[R,s(n,{modelValue:o.filtro,"onUpdate:modelValue":a[9]||(a[9]=l=>o.filtro=l),label:"Buscar usuarios",outlined:"",dense:"",class:"q-my-md"},null,8,["modelValue"]),i("div",W,[s($,{style:{height:"400px"},flat:"","virtual-scroll":"",separator:"cell",bordered:"","rows-per-page-options":[0],class:"my-sticky-header-table",rows:o.usuarios,columns:o.columns,"row-key":"id"},{"body-cell-acciones":u(l=>[s(B,{props:l},{default:u(()=>[s(U,{icon:"edit",color:"primary",dense:"",onClick:v=>o.editarUsuario(l.row)},null,8,["onClick"])]),_:2},1032,["props"])]),_:1},8,["rows","columns"])])]),_:1})]),_:1})])}var io=w(S,[["render",X]]);export{io as default};
