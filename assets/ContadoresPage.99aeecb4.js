import{_ as w,d as h,g as m,o as V,c as y,e,w as s,Q as g,b7 as Q,i as C,aA as k,f as n,j as f,b8 as q,l as p}from"./index.762d07e4.js";import{Q as N}from"./QForm.97d69fac.js";import{Q as A,a as B}from"./QTable.af352f9e.js";import{a as v,s as _}from"./axios.3e09c041.js";import"./QList.144654f9.js";import"./QSelect.fdb0a187.js";import"./selection.a5915eb9.js";const S=h({setup(){const o=[{name:"nombre",label:"Nombre",field:"nombre",align:"left"},{name:"registro",label:"Registro",field:"registro",align:"left"},{name:"activo",label:"Activo",field:"activo",align:"left",format:r=>r?"S\xED":"No"},{name:"acciones",label:"Acciones",field:"",align:"center",style:"width: 100px"}],t=m([]),l=m({idcontador:null,nombre:"",registro:"",activo:!0}),i=m(""),c=()=>{v.get("/contadores").then(r=>{t.value=r.data})},b=async()=>{if(l.value.idcontador===null){const r={_nombre:l.value.nombre,_registro:l.value.registro,_us_crea:"usrtest",_idContador:null,_activo:!0};await v.post("/contadores",r).then(d=>{_("Contador guardado correctamente.",{})})}else{const r={_nombre:l.value.nombre,_registro:l.value.registro,_us_crea:"usrtest",_idContador:l.value.idcontador,_activo:l.value.activo};await v.put("/contadores",r).then(d=>{_("Contador guardado correctamente.",{})})}u(),c()},a=r=>{l.value={...r}},u=()=>{l.value={idcontador:0,nombre:"",registro:"",activo:!0}};return{contadores:t,form:l,filtro:i,columns:o,guardarContador:b,editarContador:a,resetForm:u,filtrarContadores:()=>{const r=i.value.toLowerCase();return t.value.filter(d=>d.nombre.toLowerCase().includes(r)||d.registro.toLowerCase().includes(r))},getContadores:c}},mounted(){this.getContadores()}}),$={class:"q-pa-md"},L={class:"row q-col-gutter-sm"},U={class:"col-6"},F={class:"col-4"},T={class:"col-1"},E=n("div",{class:"col-12"},null,-1),R={class:"col-12 text-center q-pa-md q-gutter-md"},j=n("div",{class:"text-h5"},"Contadores",-1);function D(o,t,l,i,c,b){return V(),y("div",$,[e(g,{class:"q-mt-md"},{default:s(()=>[e(C,null,{default:s(()=>[e(N,{onSubmit:k(o.guardarContador,["prevent"])},{default:s(()=>[n("div",L,[n("div",U,[e(f,{modelValue:o.form.nombre,"onUpdate:modelValue":t[0]||(t[0]=a=>o.form.nombre=a),label:"Nombre del contador",outlined:""},null,8,["modelValue"])]),n("div",F,[e(f,{modelValue:o.form.registro,"onUpdate:modelValue":t[1]||(t[1]=a=>o.form.registro=a),label:"No. Registro",outlined:""},null,8,["modelValue"])]),n("div",T,[e(q,{modelValue:o.form.activo,"onUpdate:modelValue":t[2]||(t[2]=a=>o.form.activo=a),label:"Activo","left-label":"",class:"toggle-center-div"},null,8,["modelValue"])]),E,n("div",R,[e(p,{type:"submit",label:"Guardar",color:"primary",push:"",class:"btn-fixed-width"}),e(p,{label:"Cancelar",color:"primary",flat:"",class:"btn-fixed-width",onClick:o.resetForm},null,8,["onClick"])])])]),_:1},8,["onSubmit"])]),_:1})]),_:1}),e(Q,{spaced:"",dark:""}),e(g,{class:"my-card"},{default:s(()=>[e(C,null,{default:s(()=>[j,e(f,{modelValue:o.filtro,"onUpdate:modelValue":t[3]||(t[3]=a=>o.filtro=a),label:"Buscar Contador",outlined:"",dense:"",class:"q-my-md"},null,8,["modelValue"]),e(A,{style:{height:"400px"},flat:"",bordered:"","virtual-scroll":"",separator:"cell","rows-per-page-options":[0],class:"my-sticky-header-table",rows:o.filtrarContadores(),columns:o.columns,"row-key":"id"},{"body-cell-acciones":s(a=>[e(B,{props:a},{default:s(()=>[e(p,{icon:"edit",color:"primary",dense:"",onClick:u=>o.editarContador(a.row)},null,8,["onClick"])]),_:2},1032,["props"])]),_:1},8,["rows","columns"])]),_:1})]),_:1})])}var O=w(S,[["render",D]]);export{O as default};
